(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{459:function(e,t,n){},586:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n(0),i=n.n(s),r=n(28),o=n.n(r),c=(n(457),n(458),n(459),n(12)),l=n(13),d=n(15),u=n(14),h=n(435),j=n(616),b=n(632),p=n(617),f=n(614),m=function(){return Object(a.jsx)("div",{className:"text-center",children:Object(a.jsx)(f.a,{src:"http://le-consulat-drc.com/images/logo",style:{width:"30%",marginTop:"2%"}})})},O=n(615),v=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._displayEye=function(){return s.state.isVisible?Object(a.jsx)("i",{class:"fas fa-eye-slash"}):Object(a.jsx)("i",{class:"fas fa-eye"})},s._displayType=function(){return s.state.isVisible?"text":"password"},s._handleEye=function(){s.setState({isVisible:!s.state.isVisible})},s._displayContraint=function(){return s.props.contraint?"Doit contenir des majuscules, contentir des minuscules, avoir au moins 8 caract\xe8res et avoir au moins 2 chiffres":s.props.forUpdate?"Laissez vide si vous ne voulez pas le changer":"Le mot de passe..."},s.state={isVisible:!1},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(b.a.Group,{controlId:"formBasicPassword",children:Object(a.jsxs)(O.a,{className:"mb-3",children:[Object(a.jsx)(b.a.Control,{type:this._displayType(),placeholder:this._displayContraint(),"aria-label":"Mot de passe","aria-describedby":this.props.btnId,onChange:this.props.onChange,value:this.props.value}),Object(a.jsx)(O.a.Append,{children:Object(a.jsx)(h.a,{variant:"secondary","aria-hidden":"true",onClick:this._handleEye,children:this._displayEye()})})]})})}}]),n}(i.a.Component);v.defautProps={contraint:!1};var x="/api";function g(e,t){var n={method:"GET",headers:new Headers({Authorization:"Bearer "+t,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/users/").concat(e),n).then((function(e){return e.json()}))}var y=n(7),S=n.n(y),k=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handlePseudo=function(e){s.setState({pseudo:e.target.value})},s._handlePassword=function(e){s.setState({password:e.target.value})},s._displayButton=function(){return s.state.pseudo.trim().length>0&&s.state.password.trim().length>0?Object(a.jsx)(h.a,{variant:"success",id:"btnSubmit",type:"submit",onClick:s._onClick,children:"Se connecter"}):Object(a.jsx)(h.a,{variant:"success",id:"btnSubmit",type:"submit",disabled:!0,onClick:s._onClick,children:"Se connecter"})},s._onClick=function(e){e.preventDefault();var t={pseudo:s.state.pseudo,password:s.state.password};s.state.toManyRequest||function(e){var t={method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}};return fetch("".concat(x,"/users/login"),t).then((function(e){return e.json()}))}(t).then((function(e){!0===e.toManyRequest?s.setState({alert:"Vous avez fait trop de tentative, attendez ".concat(e.minute," minutes"),toManyRequest:!0}):e.idUser&&e.token?(S.a.set("idUser",e.idUser,{expires:1}),S.a.set("token",e.token,{expires:1}),window.location.href="/application/home"):e.email&&!e.password?s.setState({alert:"Votre mot de passe est incorrect!",toManyRequest:!1}):e.email||s.setState({alert:"Votre mot de passe et votre addresse email sont incorrect!",toManyRequest:!1})})).catch((function(e){s.setState({alert:"Une erreur inconnu a eu lieu!"})}))},document.title="Le Consulat - Connexion",s.state={pseudo:"",password:"",alert:"",toManyRequest:!1},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){(S.a.get("idUser")||S.a.get("token"))&&(window.location.href="/application/home")}},{key:"render",value:function(){return Object(a.jsxs)(j.a,{role:"main",children:[Object(a.jsx)(m,{}),Object(a.jsx)("h1",{children:"Connectez-vous!"}),Object(a.jsxs)(b.a,{children:[Object(a.jsxs)(b.a.Group,{controlId:"formBasicEmail",children:[Object(a.jsx)(b.a.Label,{children:"Pseudo: "}),Object(a.jsx)(b.a.Control,{type:"text",placeholder:"Votre pseudo...","aria-label":"Pseudo","aria-describedby":"btnSubmit",onChange:this._handlePseudo,value:this.state.pseudo})]}),"Votre mot de passe:",Object(a.jsx)(v,{btnId:"btnSubmit",value:this.state.password,onChange:this._handlePassword}),Object(a.jsx)(p.a,{variant:"danger",show:this.state.alert.length>0,children:this.state.alert}),this._displayButton()]})]})}}]),n}(s.Component),C=n(618),w=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={isLoading:!0,error:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;S.a.get("idUser")&&S.a.get("token")?g(S.a.get("idUser"),S.a.get("token")).then((function(t){if(t.find)switch(e.setState({isLoading:!1}),t.result.level){case 3:window.location.href="/application/sessions/inProgress";break;case 2:case 1:window.location.href="/application/stocks";break;default:S.a.remove("idUser"),S.a.remove("token"),window.location.href="/application/"}else t.invalidToken||t.userNotFound?(S.a.remove("idUser"),S.a.remove("token"),window.location.href="/application/"):e.setState({isLoading:!1,error:!0})})).catch((function(){e.setState({isLoading:!1,error:!0})})):window.location.href="/application"}},{key:"render",value:function(){return this.state.isLoading?Object(a.jsx)(C.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})}):null}}]),n}(s.Component),L=n(634),_=n(619),F=n(630),T=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s)))._onClick=function(){S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(_.a.Link,{onClick:this._onClick,children:"D\xe9connexion"})}}]),n}(i.a.Component),N=function(e){var t=e.userInfo;return Object(a.jsxs)(L.a,{bg:"dark",expand:"lg",variant:"dark",children:[Object(a.jsxs)(L.a.Brand,{href:"#home",children:[Object(a.jsx)("img",{alt:"",src:"http://le-consulat-drc.com/images/logo",width:"50",height:"50",className:"d-inline-block align-top"})," ",Object(a.jsx)("span",{style:{fontSize:30,fontWeight:"bold"},children:"Le Consulat"})]}),Object(a.jsx)(L.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(L.a.Collapse,{id:"basic-navbar-nav",children:[Object(a.jsxs)(_.a,{className:"mr-auto",activeKey:window.location.pathname,children:[Object(a.jsx)(_.a.Link,{href:"/application/users",children:"Utilisateurs"}),Object(a.jsx)(_.a.Link,{href:"/application/clients",children:"Clients"}),Object(a.jsx)(_.a.Link,{href:"/application/products",children:"Produits"}),Object(a.jsx)(_.a.Link,{href:"/application/stocks",children:"Stocks"}),Object(a.jsxs)(F.a,{title:"Transactions",id:"basic-nav-dropdown",children:[Object(a.jsx)(F.a.Item,{href:"/application/transactions/detail",children:"En d\xe9tails"}),Object(a.jsx)(F.a.Item,{href:"/application/transactions/wholesale",children:"En gros"})]}),Object(a.jsxs)(F.a,{title:"Caisse",id:"basic-nav-dropdown",children:[Object(a.jsx)(F.a.Item,{href:"/application/guichet/transactions",children:"Transactions"}),Object(a.jsx)(F.a.Item,{href:"/application/guichet/categories",children:"Cat\xe9gories"})]}),Object(a.jsxs)(F.a,{title:"Sessions",id:"basic-nav-dropdown",children:[Object(a.jsx)(F.a.Item,{href:"/application/sessions/inProgress",children:"En cours"}),Object(a.jsx)(F.a.Item,{href:"/application/sessions/notPaid",children:"Non pay\xe9"}),Object(a.jsx)(F.a.Item,{href:"/application/sessions/report",children:"Rapport d'un jour"}),Object(a.jsx)(F.a.Item,{href:"/application/sessions/report/period",children:"Rapport d'une p\xe9riode"})]}),Object(a.jsx)(T,{})]}),Object(a.jsxs)("div",{className:"bg-white",children:[Object(a.jsx)("strong",{children:"Nom:"})," ",t.name,Object(a.jsx)("br",{}),Object(a.jsx)("strong",{children:"Poste:"})," ",function(){switch(t.level){case 3:return"Caissier / Caissi\xe8re";case 2:return"Manager";case 1:return"Administrateur";default:return"Employ\xe9"}}()]})]})]})};function P(){return fetch("https://api.techeatfast.com/commands/restaurant/2/not-done",{method:"GET",headers:{Authorization:"Bearer token-special-le-consulat"}}).then((function(e){return e.json()}))}var U=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e))._interval=function(){return setInterval((function(){P().then((function(e){a.setState({data:e.result},(function(){a.nbre++}))}))}),2e4)},a.state={data:[],newCommand:!1},a.nbre=0,a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;S.a.get("idUser")&&S.a.get("token")&&P().then((function(t){t.find&&e.setState({data:t.result},(function(){e.nbre++,e._interval()}))}))}},{key:"componentDidUpdate",value:function(e,t){JSON.stringify(t.data)!==JSON.stringify(this.state.data)&&this.state.data.length>0&&(Notification.requestPermission((function(e){Notification.permission!==e&&(Notification.permission=e)})),new Notification("Notification",{body:"Nouveaux \xe9l\xe9ments! Allez voir"}).onclick=function(e){e.preventDefault(),window.open("https://resto.techeatfast.com/commands/live")},this.setState({newCommand:!0}))}},{key:"render",value:function(){var e=this;return this.state.newCommand?Object(a.jsx)("div",{className:"blink",onClick:function(){e.setState({newCommand:!1})}}):Object(a.jsx)("span",{})}}]),n}(i.a.Component),I=function(e){var t=e.userInfo;return Object(a.jsxs)(L.a,{bg:"dark",expand:"lg",variant:"dark",children:[Object(a.jsxs)(L.a.Brand,{href:"#home",children:[Object(a.jsx)("img",{alt:"",src:"http://le-consulat-drc.com/images/logo",width:"50",height:"50",className:"d-inline-block align-top"})," ",Object(a.jsx)("span",{style:{fontSize:30,fontWeight:"bold"},children:"Le Consulat"})]}),Object(a.jsx)(L.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(L.a.Collapse,{id:"basic-navbar-nav",children:[Object(a.jsxs)(_.a,{className:"mr-auto",activeKey:window.location.pathname,children:[Object(a.jsxs)(F.a,{title:"Sessions",id:"basic-nav-dropdown",children:[Object(a.jsx)(F.a.Item,{href:"/application/sessions/inProgress",children:"En cours"}),Object(a.jsx)(F.a.Item,{href:"/application/sessions/notPaid",children:"Non pay\xe9"}),Object(a.jsx)(F.a.Item,{href:"/application/sessions/report",children:"Rapport d'un jour"}),Object(a.jsx)(F.a.Item,{href:"/application/sessions/report/period",children:"Rapport d'une p\xe9riode"})]}),Object(a.jsx)(_.a.Link,{href:"/application/clients",children:"Clients"}),Object(a.jsx)(_.a.Link,{href:"/application/stocks",children:"Stocks"}),Object(a.jsx)(T,{})]}),Object(a.jsxs)("div",{className:"bg-white",children:[Object(a.jsx)("strong",{children:"Nom:"})," ",t.name,Object(a.jsx)("br",{}),Object(a.jsx)("strong",{children:"Poste:"})," ",function(){switch(t.level){case 3:return"Caissier / Caissi\xe8re";case 2:return"Manager";case 1:return"Administrateur";default:return"Employ\xe9"}}()]})]})]})},M=function(e){var t=e.userInfo;return Object(a.jsxs)(L.a,{bg:"dark",expand:"lg",variant:"dark",children:[Object(a.jsxs)(L.a.Brand,{href:"#home",children:[Object(a.jsx)("img",{alt:"",src:"http://le-consulat-drc.com/images/logo",width:"50",height:"50",className:"d-inline-block align-top"})," ",Object(a.jsx)("span",{style:{fontSize:30,fontWeight:"bold"},children:"Le Consulat"})]}),Object(a.jsx)(L.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(L.a.Collapse,{id:"basic-navbar-nav",children:[Object(a.jsxs)(_.a,{className:"mr-auto",activeKey:window.location.pathname,children:[Object(a.jsx)(_.a.Link,{href:"/application/stocks",children:"Stocks"}),Object(a.jsx)(_.a.Link,{href:"/application/transactions/manager",children:"Transactions"}),Object(a.jsx)(_.a.Link,{href:"/application/clients",children:"Clients"}),Object(a.jsxs)(F.a,{title:"Sessions",id:"basic-nav-dropdown",children:[Object(a.jsx)(F.a.Item,{href:"/application/sessions/inProgress",children:"En cours"}),Object(a.jsx)(F.a.Item,{href:"/application/sessions/notPaid",children:"Non pay\xe9"}),Object(a.jsx)(F.a.Item,{href:"/application/sessions/report",children:"Rapport d'un jour"}),Object(a.jsx)(F.a.Item,{href:"/application/sessions/report/period",children:"Rapport d'une p\xe9riode"})]}),Object(a.jsx)(T,{})]}),Object(a.jsxs)("div",{className:"bg-white",children:[Object(a.jsx)("strong",{children:"Nom:"})," ",t.name,Object(a.jsx)("br",{}),Object(a.jsx)("strong",{children:"Poste:"})," ",function(){switch(t.level){case 3:return"Caissier / Caissi\xe8re";case 2:return"Manager";case 1:return"Administrateur";default:return"Employ\xe9"}}()]})]})]})},z=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={dataUser:null,isLoading:!0},S.a.get("idUser")&&S.a.get("token")||(window.location.href="/application/"),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;g(S.a.get("idUser"),S.a.get("token")).then((function(t){t.find?e.setState({dataUser:t.result,isLoading:!1}):window.alert("Une erreur inconnue a eu lieu")})).catch((function(){window.alert("Une erreur inconnue a eu lieu")}))}},{key:"render",value:function(){return this.state.isLoading?Object(a.jsx)(C.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})}):1===this.state.dataUser.level?Object(a.jsx)(N,{userInfo:this.state.dataUser}):2===this.state.dataUser.level?Object(a.jsx)(M,{userInfo:this.state.dataUser}):3===this.state.dataUser.level?Object(a.jsx)(I,{userInfo:this.state.dataUser}):void 0}}]),n}(i.a.Component);z.defaultProps={redirect:!1};var B=z,A=n(30),D=n(49),E=n.n(D),H=n(167),G=n.n(H),q=n(128),R=n.n(q),$=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this))._adapt=function(e){switch(e){case 3:return"Caissier / Caissi\xe8re";case 2:return"Manager";case 1:return"Administrateur"}},e._handleDelete=function(e,t){window.confirm("\xcates vous s\xfbre de vouloir supprimer cette utilisateur")&&function(e,t){var n={method:"DELETE",headers:new Headers({Authorization:"Bearer "+e})};return fetch("".concat(x,"/users/").concat(t),n).then((function(e){return e.json()}))}(S.a.get("token"),t.idUser).then((function(e){e.delete?window.location.reload():e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):e.cannotDeleteAdmin?alert("Vous ne pouvez pas supprimer un administrateur"):alert("Une erreur a eu lieu lors de l'op\xe9ration, r\xe9essayez ou contactez nous")})).catch((function(){alert("Une erreur a eu lieu lors de l'op\xe9ration, r\xe9essayez ou contactez nous")}))},e._handleUpdate=function(t,n){var a;for(var s in e.state.users)e.state.users[s].idUser===n.idUser&&(a=e.state.users[s]);e.props.onUpdate(a)},e.state={users:[],isLoading:!0,error:!1},e.columns=[{title:"Nom",field:"name"},{title:"Pseudo",field:"pseudo"},{title:"R\xf4le",field:"level2"}],e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;(function(e){var t={method:"GET",headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/users"),t).then((function(e){return e.json()}))})(S.a.get("token")).then((function(t){if(t.find){var n=[];for(var a in t.result)n.push(Object(A.a)(Object(A.a)({},t.result[a]),{},{level2:e._adapt(t.result[a].level)}));e.setState({users:n,isLoading:!1,error:!1})}else t.invalidToken?(S.a.remove("idUser"),S.a.remove("token"),window.location.href="/application/"):e.setState({isLoading:!1,error:!1})})).catch((function(){e.setState({isLoading:!1,error:!1})}))}},{key:"render",value:function(){return this.state.error?Object(a.jsx)("h2",{children:"Une erreur a eu leiu veuillez r\xe9essayer"}):Object(a.jsx)(E.a,{title:"Liste des utilisateur",data:this.state.users,columns:this.columns,options:{search:!0,paging:!1,filtering:!0,exportButton:!0},isLoading:this.state.isLoading,actions:[{icon:function(){return Object(a.jsx)(R.a,{htmlColor:"#007bff"})},tooltip:"Modifier",onClick:this._handleUpdate},{icon:function(){return Object(a.jsx)(G.a,{htmlColor:"#dc3545"})},tooltip:"Supprimer l'utilisateur",onClick:this._handleDelete}]})}}]),n}(i.a.Component),V=n(631),J=n(265),Y=n.n(J),Q=n(36),K=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleClose=function(){s.props.callback?s.props.callback():s.setState({show:!1})},s._handleName=function(e){s.setState({name:e.target.value})},s._handlePseudo=function(e){s.setState({pseudo:e.target.value})},s._handlePassword=function(e){s.setState({password:e.target.value})},s._handleLevel=function(e){s.setState({level:parseInt(e.target.value)})},s._displayButton=function(){var e=new Y.a;return e.is().min(8).has().uppercase().has().lowercase().has().digits(2),e.validate(s.state.password)&&s.state.name.length>=2&&s.state.name.length<30&&Q.a.isString(s.state.name)&&s.state.pseudo.length>=2&&s.state.pseudo.length<30&&Q.a.isString(s.state.pseudo)&&s.state.level>=1&&s.state.level<=3&&!s.state.isLoading?Object(a.jsxs)(h.a,{variant:"success",onClick:s._onClick,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]}):Object(a.jsxs)(h.a,{variant:"success",disabled:!0,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]})},s._onClick=function(e){e.preventDefault(),s.setState({isLoading:!0}),function(e,t){var n={method:"POST",body:JSON.stringify(e),headers:new Headers({Authorization:"Bearer "+t,"Content-type":"application/json; charset=UTF-8"})};return fetch("".concat(x,"/users"),n).then((function(e){return e.json()}))}({name:s.state.name,pseudo:s.state.pseudo,password:s.state.password,level:s.state.level},S.a.get("token")).then((function(e){e.create?(s.setState({isLoading:!1,success:!0,invalidForm:!1,existPseudo:!1,error:!1}),setTimeout((function(){window.location.reload()}),750)):e.invalidForm?s.setState({isLoading:!1,success:!1,invalidForm:!0,existPseudo:!1,error:!1}):e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):e.existPseudo?s.setState({isLoading:!1,success:!1,invalidForm:!1,existPseudo:!0,error:!1}):s.setState({isLoading:!1,success:!1,invalidForm:!1,existPseudo:!1,error:!0})})).catch((function(){s.setState({isLoading:!1,success:!1,invalidForm:!1,existPseudo:!1,error:!0})}))},s._displayAlert=function(){return s.state.success?Object(a.jsx)(p.a,{variant:"success",children:"Utilisateur ajout\xe9 avec succ\xe8s"}):s.state.invalidForm?Object(a.jsx)(p.a,{variant:"warning",children:"Des champs ne sont pas valides"}):s.state.existPseudo?Object(a.jsx)(p.a,{variant:"warning",children:"Un utilisateur poss\xe8de le m\xeame pseudo"}):s.state.error?Object(a.jsx)(p.a,{variant:"danger",children:"Une erreur a eu lieu, r\xe9essayer ou contactez-nous"}):void 0},s.state={show:!0,name:"",pseudo:"",password:"",level:1,isLoading:!1,success:!1,invalidForm:!1,existPseudo:!1,error:!1},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(V.a,{show:this.state.show,onHide:this._handleClose,backdrop:"static",ddccc:!0,keyboard:!1,children:[Object(a.jsx)(V.a.Header,{closeButton:!0,children:Object(a.jsx)(V.a.Title,{children:"Ajouter un client"})}),Object(a.jsxs)(V.a.Body,{style:{fontSize:15},children:[Object(a.jsxs)(b.a.Group,{controlId:"name",children:[Object(a.jsx)(b.a.Label,{children:"Nom: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleName,value:this.state.name,type:"text",placeholder:"Le nom du client...","aria-label":"Nom","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"phoneNumbereeeddd",children:[Object(a.jsx)(b.a.Label,{children:"Pseudo: "}),Object(a.jsx)(b.a.Control,{onChange:this._handlePseudo,value:this.state.pseudo,type:"text",placeholder:"Le pseudo de l'utilisateur...","aria-label":"Pseudo","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"password",children:[Object(a.jsx)(b.a.Label,{children:"Mot de passe: "}),Object(a.jsx)(v,{onChange:this._handlePassword,value:this.state.password})]}),Object(a.jsxs)(b.a.Group,{controlId:"level",children:[Object(a.jsx)(b.a.Label,{children:"R\xf4le: "}),Object(a.jsxs)("select",{onChange:this._handleLevel,className:"form-control",children:[Object(a.jsx)("option",{value:1,selected:!0,children:"Administrateur"}),Object(a.jsx)("option",{value:2,children:"Manager"}),Object(a.jsx)("option",{value:3,children:"Caissier/i\xe8re"})]})]}),this._displayAlert()]}),Object(a.jsxs)(V.a.Footer,{children:[this._displayButton(),Object(a.jsx)(h.a,{variant:"danger",onClick:this._handleClose,children:"Fermer"})]})]})}}]),n}(i.a.Component),W=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleClose=function(){s.props.callback?s.props.callback():s.setState({show:!1})},s._handleName=function(e){s.setState({name:e.target.value})},s._handlePseudo=function(e){s.setState({pseudo:e.target.value})},s._handlePassword=function(e){s.setState({password:e.target.value})},s._handleLevel=function(e){s.setState({level:parseInt(e.target.value)})},s._displayButton=function(){var e=new Y.a;return e.is().min(8).has().uppercase().has().lowercase().has().digits(2),s.state.password.trim().length>1?e.validate(s.state.password)&&s.state.name.length>=2&&s.state.name.length<30&&Q.a.isString(s.state.name)&&s.state.pseudo.length>=2&&s.state.pseudo.length<30&&Q.a.isString(s.state.pseudo)&&s.state.level>=1&&s.state.level<=3&&!s.state.isLoading?Object(a.jsx)(h.a,{variant:"success",onClick:s._onClick,children:"Confirmer"}):Object(a.jsx)(h.a,{variant:"success",disabled:!0,children:"Confirmer"}):s.state.name.length>=2&&s.state.name.length<30&&Q.a.isString(s.state.name)&&s.state.pseudo.length>=2&&s.state.pseudo.length<30&&Q.a.isString(s.state.pseudo)&&s.state.level>=1&&s.state.level<=2&&!s.state.isLoading?Object(a.jsx)(h.a,{variant:"success",onClick:s._onClick,children:"Confirmer"}):Object(a.jsx)(h.a,{variant:"success",disabled:!0,children:"Confirmer"})},s._onClick=function(e){e.preventDefault(),s.setState({isLoading:!0});var t=s.state.password.trim().length>1?{name:s.state.name,pseudo:s.state.pseudo,password:s.state.password,level:s.state.level}:{name:s.state.name,pseudo:s.state.pseudo,level:s.state.level};(function(e,t,n){var a={method:"PUT",body:JSON.stringify(n),headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/json; charset=UTF-8"})};return fetch("".concat(x,"/users/").concat(t),a).then((function(e){return e.json()}))})(S.a.get("token"),s.props.data.idUser,t).then((function(e){e.update?(s.setState({isLoading:!1,success:!0,invalidForm:!1,changeLastAdmin:!1,existPseudo:!1,error:!1}),setTimeout((function(){window.location.reload()}),750)):e.invalidForm?s.setState({isLoading:!1,success:!1,invalidForm:!0,changeLastAdmin:!1,existPseudo:!1,error:!1}):e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):e.existPseudo?s.setState({isLoading:!1,success:!1,invalidForm:!1,changeLastAdmin:!1,existPseudo:!0,error:!1}):e.cantChangeLevelOfLastAdmin?s.setState({isLoading:!1,success:!1,invalidForm:!1,changeLastAdmin:!0,existPseudo:!1,error:!1}):s.setState({isLoading:!1,success:!1,invalidForm:!1,changeLastAdmin:!1,existPseudo:!1,error:!0})})).catch((function(){s.setState({isLoading:!1,success:!1,invalidForm:!1,changeLastAdmin:!1,existPseudo:!1,error:!0})}))},s._displayAlert=function(){return s.state.success?Object(a.jsx)(p.a,{variant:"success",children:"Utilisateur modifi\xe9 avec succ\xe8s"}):s.state.invalidForm?Object(a.jsx)(p.a,{variant:"warning",children:"Des champs ne sont pas valides"}):s.state.changeLastAdmin?Object(a.jsx)(p.a,{variant:"warning",children:"Vous ne pouvez pas changer le r\xf4le du dernier Admin"}):s.state.existPseudo?Object(a.jsx)(p.a,{variant:"warning",children:"Un utilisateur poss\xe8de le m\xeame pseudo"}):s.state.error?Object(a.jsx)(p.a,{variant:"danger",children:"Une erreur a eu lieu, r\xe9essayer ou contactez-nous"}):void 0},s._displayOption=function(){return 1===s.state.level?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("option",{value:1,selected:!0,children:"Administrateur"}),Object(a.jsx)("option",{value:2,children:"Manager"}),Object(a.jsx)("option",{value:3,children:"Caissier/i\xe8re"})]}):2===s.state.level?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("option",{value:1,children:"Administrateur"}),Object(a.jsx)("option",{value:2,selected:!0,children:"Manager"}),Object(a.jsx)("option",{value:3,children:"Caissier/i\xe8re"})]}):3===s.state.level?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("option",{value:1,children:"Administrateur"}),Object(a.jsx)("option",{value:2,children:"Manager"}),Object(a.jsx)("option",{value:3,selected:!0,children:"Caissier/i\xe8re"})]}):void 0},s.state={show:!0,name:s.props.data.name,pseudo:s.props.data.pseudo,password:"",level:s.props.data.level,isLoading:!1,success:!1,invalidForm:!1,existPseudo:!1,changeLastAdmin:!1,error:!1},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(V.a,{show:this.state.show,onHide:this._handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(V.a.Header,{closeButton:!0,children:Object(a.jsx)(V.a.Title,{children:"Modifier un utilisateur"})}),Object(a.jsxs)(V.a.Body,{style:{fontSize:15},children:[Object(a.jsxs)(b.a.Group,{controlId:"name",children:[Object(a.jsx)(b.a.Label,{children:"Nom: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleName,value:this.state.name,type:"text",placeholder:"Le nom de l'utilisateur...","aria-label":"Nom","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"pseudo",children:[Object(a.jsx)(b.a.Label,{children:"Pseudo: "}),Object(a.jsx)(b.a.Control,{onChange:this._handlePseudo,value:this.state.pseudo,type:"text",placeholder:"Le pseudo de l'utilisateur...","aria-label":"Pseudo","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"password",children:[Object(a.jsx)(b.a.Label,{children:"Mot de passe (Laissez vide pour ne pas changer): "}),Object(a.jsx)(v,{onChange:this._handlePassword,value:this.state.password})]}),Object(a.jsxs)(b.a.Group,{controlId:"level",children:[Object(a.jsx)(b.a.Label,{children:"R\xf4le: "}),Object(a.jsx)("select",{onChange:this._handleLevel,className:"form-control",children:this._displayOption()})]}),this._displayAlert()]}),Object(a.jsxs)(V.a.Footer,{children:[this._displayButton(),Object(a.jsx)(h.a,{variant:"danger",onClick:this._handleClose,children:"Fermer"})]})]})}}]),n}(i.a.Component),X=function(e){g(S.a.get("idUser"),S.a.get("token")).then((function(t){t.find?1!==t.result.level?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):e&&e(t.result):(alert("Une erreur a eu lieu"),window.location.href="/application/")})).catch((function(){alert("Une erreur a eu lieu"),window.location.href="/application/"}))},Z=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e))._addUser=function(){a.setState({addMode:!0,editMode:!1})},a._onUpdate=function(e){a.infoEdit=e,a.setState({addMode:!1,editMode:!0})},a._onClose=function(){a.setState({addMode:!1,editMode:!1})},document.title="Le Consulat - Utilisateurs",a.state={addMode:!1,editMode:!1},a.infoEdit=null,a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){X()}},{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Utilisateurs"}),Object(a.jsxs)(h.a,{variant:"success",onClick:this._addUser,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter un utilisateur"]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)($,{onUpdate:this._onUpdate}),this.state.addMode?Object(a.jsx)(K,{callback:this._onClose}):null,this.state.editMode?Object(a.jsx)(W,{callback:this._onClose,data:this.infoEdit}):null]})]})}}]),n}(i.a.Component);function ee(e){var t={method:"GET",headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/clients"),t).then((function(e){return e.json()}))}var te=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this))._handleUpdate=function(t,n){var a;for(var s in e.state.clients)e.state.clients[s].idClient===n.idClient&&(a=e.state.clients[s]);e.props.onUpdate(a)},e._handleDelete=function(e,t){window.confirm("\xcates vous s\xfbre de vouloir supprimer ce client?")&&function(e,t){var n={method:"DELETE",headers:new Headers({Authorization:"Bearer "+e})};return fetch("".concat(x,"/clients/").concat(t),n).then((function(e){return e.json()}))}(S.a.get("token"),t.idClient).then((function(e){e.delete?window.location.reload():e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):alert("Une erreur a eu lieu lors de l'op\xe9ration, r\xe9essayez ou contactez nous")})).catch((function(){alert("Une erreur a eu lieu lors de l'op\xe9ration, r\xe9essayez ou contactez nous")}))},e.state={clients:[],isLoading:!0,error:!1},e.columns=[{title:"Nom",field:"name"},{title:"Num\xe9ro de t\xe9l\xe9phone",field:"phoneNumber"},{title:"Adresse email",field:"email"},{title:"Anniversaire",field:"birthday"}],e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;ee(S.a.get("token")).then((function(t){if(t.find){var n=[];for(var a in t.result)n.push(Object(A.a)({},t.result[a]));e.setState({clients:n,isLoading:!1,error:!1})}else t.invalidToken?(S.a.remove("idUser"),S.a.remove("token"),window.location.href="/application/"):e.setState({isLoading:!1,error:!1})})).catch((function(){e.setState({isLoading:!1,error:!1})}))}},{key:"render",value:function(){return this.state.error?Object(a.jsx)("h2",{children:"Une erreur a eu leiu veuillez r\xe9essayer"}):Object(a.jsx)(E.a,{title:"Liste des clients",data:this.state.clients,columns:this.columns,options:{search:!0,paging:!1,filtering:!0,exportButton:!0},isLoading:this.state.isLoading,actions:[{icon:function(){return Object(a.jsx)(R.a,{htmlColor:"#007bff"})},tooltip:"Modifier",onClick:this._handleUpdate},{icon:function(){return Object(a.jsx)(G.a,{htmlColor:"#dc3545"})},tooltip:"Supprimer le client",onClick:this._handleDelete}]})}}]),n}(i.a.Component),ne=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleClose=function(){s.props.callback?s.props.callback():s.setState({show:!1})},s._handleName=function(e){s.setState({name:e.target.value})},s._handlePhoneNumber=function(e){s.setState({phoneNumber:e.target.value})},s._handleEmail=function(e){s.setState({email:e.target.value})},s._handleBirthday=function(e){s.setState({birthday:e.target.value})},s._displayButton=function(){return s.state.name.length>=2&&s.state.name.length<=50&&Q.a.isString(s.state.name)&&!s.state.isLoading?Object(a.jsxs)(h.a,{variant:"success",onClick:s._onClick,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]}):Object(a.jsxs)(h.a,{variant:"success",disabled:!0,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]})},s._onClick=function(e){e.preventDefault(),s.setState({isLoading:!0}),function(e,t){var n={method:"POST",body:JSON.stringify(e),headers:new Headers({Authorization:"Bearer "+t,"Content-type":"application/json; charset=UTF-8"})};return fetch("".concat(x,"/clients"),n).then((function(e){return e.json()}))}({name:s.state.name,phoneNumber:s.state.phoneNumber,email:s.state.email,birthday:s.state.birthday},S.a.get("token")).then((function(e){e.create?(s.setState({isLoading:!1,success:!0,invalidForm:!1,existName:!1,error:!1}),setTimeout((function(){window.location.reload()}),750)):e.invalidForm?s.setState({isLoading:!1,success:!1,invalidForm:!0,existName:!1,error:!1}):e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):e.existName?s.setState({isLoading:!1,success:!1,invalidForm:!1,existName:!0,error:!1}):s.setState({isLoading:!1,success:!1,invalidForm:!1,existName:!1,error:!0})})).catch((function(){s.setState({isLoading:!1,success:!1,invalidForm:!1,existName:!1,error:!0})}))},s._displayAlert=function(){return s.state.success?Object(a.jsx)(p.a,{variant:"success",children:"Client ajout\xe9 avec succ\xe8s"}):s.state.invalidForm?Object(a.jsx)(p.a,{variant:"warning",children:"Des champs ne sont pas valides"}):s.state.existName?Object(a.jsx)(p.a,{variant:"warning",children:"Un client poss\xe8de d\xe9j\xe0 le m\xeame nom"}):s.state.error?Object(a.jsx)(p.a,{variant:"danger",children:"Une erreur a eu lieu, r\xe9essayer ou contactez-nous"}):void 0},s.state={show:!0,name:"",phoneNumber:"",email:"",birthday:"",isLoading:!1,success:!1,invalidForm:!1,existName:!1,error:!1},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(V.a,{show:this.state.show,onHide:this._handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(V.a.Header,{closeButton:!0,children:Object(a.jsx)(V.a.Title,{children:"Ajouter un client"})}),Object(a.jsxs)(V.a.Body,{style:{fontSize:15},children:[Object(a.jsxs)(b.a.Group,{controlId:"name",children:[Object(a.jsx)(b.a.Label,{children:"Nom: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleName,value:this.state.name,type:"text",placeholder:"Le nom du client...","aria-label":"Nom","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"phoneNumber",children:[Object(a.jsx)(b.a.Label,{children:"Num\xe9ro de t\xe9l\xe9phone: "}),Object(a.jsx)(b.a.Control,{onChange:this._handlePhoneNumber,value:this.state.phoneNumber,type:"text",placeholder:"Le num\xe9ro du client...","aria-label":"phoneNumber","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"email",children:[Object(a.jsx)(b.a.Label,{children:"Adresse email: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleEmail,value:this.state.email,type:"text",placeholder:"L'email du client...","aria-label":"email","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"birthday",children:[Object(a.jsx)(b.a.Label,{children:"Date de naissance: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleBirthday,value:this.state.birthday,type:"text",placeholder:"La date de naissance du client...","aria-label":"naissance","aria-describedby":"btnSubmit"})]}),this._displayAlert()]}),Object(a.jsxs)(V.a.Footer,{children:[this._displayButton(),Object(a.jsx)(h.a,{variant:"danger",onClick:this._handleClose,children:"Fermer"})]})]})}}]),n}(i.a.Component),ae=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleClose=function(){s.props.callback?s.props.callback():s.setState({show:!1})},s._handleName=function(e){s.setState({name:e.target.value})},s._handlePhoneNumber=function(e){s.setState({phoneNumber:e.target.value})},s._handleEmail=function(e){s.setState({email:e.target.value})},s._handleBirthday=function(e){s.setState({birthday:e.target.value})},s._displayButton=function(){return s.state.name.length>=2&&s.state.name.length<=50&&Q.a.isString(s.state.name)&&!s.state.isLoading?Object(a.jsx)(h.a,{variant:"success",onClick:s._onClick,children:"Confirmer"}):Object(a.jsx)(h.a,{variant:"success",disabled:!0,children:"Confirmer"})},s._onClick=function(e){e.preventDefault(),s.setState({isLoading:!0});var t={name:s.state.name,phoneNumber:s.state.phoneNumber,email:s.state.email,birthday:s.state.birthday};(function(e,t,n){var a={method:"PUT",body:JSON.stringify(n),headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/json; charset=UTF-8"})};return fetch("".concat(x,"/clients/").concat(t),a).then((function(e){return e.json()}))})(S.a.get("token"),s.props.data.idClient,t).then((function(e){e.update?(s.setState({isLoading:!1,success:!0,invalidForm:!1,existName:!1,error:!1}),setTimeout((function(){window.location.reload()}),750)):e.invalidForm?s.setState({isLoading:!1,success:!1,invalidForm:!0,existName:!1,error:!1}):e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):e.existName?s.setState({isLoading:!1,success:!1,invalidForm:!1,existName:!0,error:!1}):s.setState({isLoading:!1,success:!1,invalidForm:!1,existName:!1,error:!0})})).catch((function(){s.setState({isLoading:!1,success:!1,invalidForm:!1,existName:!1,error:!0})}))},s._displayAlert=function(){return s.state.success?Object(a.jsx)(p.a,{variant:"success",children:"Client modifi\xe9 avec succ\xe8s"}):s.state.invalidForm?Object(a.jsx)(p.a,{variant:"warning",children:"Des champs ne sont pas valides"}):s.state.existName?Object(a.jsx)(p.a,{variant:"warning",children:"Un client poss\xe8de d\xe9j\xe0 le m\xeame nom"}):s.state.error?Object(a.jsx)(p.a,{variant:"danger",children:"Une erreur a eu lieu, r\xe9essayer ou contactez-nous"}):void 0},s.state={show:!0,name:s.props.data.name,phoneNumber:s.props.data.phoneNumber,email:s.props.data.email,birthday:s.props.data.birthday,isLoading:!1,success:!1,invalidForm:!1,existName:!1,error:!1},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(V.a,{show:this.state.show,onHide:this._handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(V.a.Header,{closeButton:!0,children:Object(a.jsx)(V.a.Title,{children:"Modifier un client"})}),Object(a.jsxs)(V.a.Body,{style:{fontSize:15},children:[Object(a.jsxs)(b.a.Group,{controlId:"name",children:[Object(a.jsx)(b.a.Label,{children:"Nom: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleName,value:this.state.name,type:"text",placeholder:"Le nom du client...","aria-label":"Nom","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"phoneNumber",children:[Object(a.jsx)(b.a.Label,{children:"Num\xe9ro de t\xe9l\xe9phone: "}),Object(a.jsx)(b.a.Control,{onChange:this._handlePhoneNumber,value:this.state.phoneNumber,type:"text",placeholder:"Le num\xe9ro du client...","aria-label":"phoneNumber","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"email",children:[Object(a.jsx)(b.a.Label,{children:"Adresse email: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleEmail,value:this.state.email,type:"text",placeholder:"L'email du client...","aria-label":"email","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"birthday",children:[Object(a.jsx)(b.a.Label,{children:"Date de naissance: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleBirthday,value:this.state.birthday,type:"text",placeholder:"La date de naissance du client...","aria-label":"naissance","aria-describedby":"btnSubmit"})]}),this._displayAlert()]}),Object(a.jsxs)(V.a.Footer,{children:[this._displayButton(),Object(a.jsx)(h.a,{variant:"danger",onClick:this._handleClose,children:"Fermer"})]})]})}}]),n}(i.a.Component),se=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e))._addUser=function(){a.setState({addMode:!0,editMode:!1})},a._onUpdate=function(e){a.infoEdit=e,a.setState({addMode:!1,editMode:!0})},a._onClose=function(){a.setState({addMode:!1,editMode:!1})},document.title="Le Consulat - Clients",a.state={addMode:!1,editMode:!1},a.infoEdit=null,a}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Clients"}),Object(a.jsxs)(h.a,{variant:"success",onClick:this._addUser,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter un client"]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(te,{onUpdate:this._onUpdate}),this.state.addMode?Object(a.jsx)(ne,{callback:this._onClose}):null,this.state.editMode?Object(a.jsx)(ae,{callback:this._onClose,data:this.infoEdit}):null]})]})}}]),n}(i.a.Component),ie=n(38),re=n.n(ie),oe=n(61);function ce(e){var t={method:"GET",headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/products"),t).then((function(e){return e.json()}))}function le(e,t){var n={method:"GET",headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/products/").concat(t),n).then((function(e){return e.json()}))}var de=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this))._adapt=function(e){return 1===e?"Oui":"Non"},e._handleUpdate=function(t,n){var a;for(var s in e.state.products)e.state.products[s].idProduct===n.idProduct&&(a=e.state.products[s]);e.props.onUpdate(a)},e._handleDelete=function(e,t){window.confirm("\xcates vous s\xfbre de vouloir supprimer ce produit?")&&function(e,t){var n={method:"DELETE",headers:new Headers({Authorization:"Bearer "+e})};return fetch("".concat(x,"/products/").concat(t),n).then((function(e){return e.json()}))}(S.a.get("token"),t.idProduct).then((function(e){e.delete?window.location.reload():e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):alert("Une erreur a eu lieu lors de l'op\xe9ration, r\xe9essayez ou contactez nous")})).catch((function(){alert("Une erreur a eu lieu lors de l'op\xe9ration, r\xe9essayez ou contactez nous")}))},e.state={products:[],isLoading:!0,error:!1},e.columns=[{title:"Nom",field:"name"},{title:"Type",field:"type"},{title:"Prix",field:"price"},{title:"Prix d'achat",field:"buyPrice"},{title:"Stock",field:"inStock"},{title:"Unit\xe9",field:"unit"},{title:"Valeur",field:"value"}],e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(oe.a)(re.a.mark((function e(){var t,n=this;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,ce(S.a.get("token")).then((function(e){if(e.find){for(var a in e.result)t.push(Object(A.a)(Object(A.a)({},e.result[a]),{},{value:"".concat(e.result[a].price*e.result[a].inStock,"$"),price:"".concat(e.result[a].price,"$")}));n.setState({products:t,isLoading:!1,error:!1})}else e.invalidToken?(S.a.remove("idUser"),S.a.remove("token"),window.location.href="/application/"):n.setState({isLoading:!1,error:!1})})).catch((function(){n.setState({isLoading:!1,error:!1})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.error?Object(a.jsx)("h2",{children:"Une erreur a eu leiu veuillez r\xe9essayer"}):Object(a.jsx)(E.a,{title:"Liste des produits",data:this.state.products,columns:this.columns,options:{search:!0,paging:!1,filtering:!0,exportButton:!0},isLoading:this.state.isLoading,actions:[{icon:function(){return Object(a.jsx)(R.a,{htmlColor:"#007bff"})},tooltip:"Modifier",onClick:this._handleUpdate},{icon:function(){return Object(a.jsx)(G.a,{htmlColor:"#dc3545"})},tooltip:"Supprimer le produit",onClick:this._handleDelete}]})}}]),n}(i.a.Component),ue=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleClose=function(){s.props.callback?s.props.callback():s.setState({show:!1})},s._handleName=function(e){s.setState({name:e.target.value})},s._handlePrice=function(e){s.setState({price:e.target.value})},s._handleType=function(e){s.setState({type:e.target.value})},s._handleUnit=function(e){s.setState({unit:e.target.value})},s._handleInStock=function(e){s.setState({inStock:e.target.value})},s._displayButton=function(){return s.state.name.length>=2&&s.state.name.length<=70&&("Spiritueux"===s.state.type||"Boissons"===s.state.type||"Pl\xe2ts"===s.state.type||"Cigarettes"===s.state.type)&&Q.a.isNumber(Number(s.state.price))&&Q.a.isNumber(Number(s.state.inStock))&&s.state.unit.length>=2&&s.state.unit.length<=70&&!s.state.isLoading?Object(a.jsxs)(h.a,{variant:"success",onClick:s._onClick,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]}):Object(a.jsxs)(h.a,{variant:"success",disabled:!0,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]})},s._onClick=function(e){e.preventDefault(),s.setState({isLoading:!0}),function(e,t){var n={method:"POST",body:JSON.stringify(e),headers:new Headers({Authorization:"Bearer "+t,"Content-type":"application/json; charset=UTF-8"})};return fetch("".concat(x,"/products"),n).then((function(e){return e.json()}))}({name:s.state.name,price:Number(s.state.price),type:s.state.type,unit:s.state.unit,inStock:Number(s.state.inStock)},S.a.get("token")).then((function(e){e.create?(s.setState({isLoading:!1,success:!0,invalidForm:!1,existName:!1,error:!1}),setTimeout((function(){window.location.reload()}),250)):e.invalidForm?s.setState({isLoading:!1,success:!1,invalidForm:!0,existName:!1,error:!1}):e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):e.existName?s.setState({isLoading:!1,success:!1,invalidForm:!1,existName:!0,error:!1}):s.setState({isLoading:!1,success:!1,invalidForm:!1,existName:!1,error:!0})})).catch((function(){s.setState({isLoading:!1,success:!1,invalidForm:!1,existName:!1,error:!0})}))},s._displayAlert=function(){return s.state.success?Object(a.jsx)(p.a,{variant:"success",children:"Produit ajout\xe9 avec succ\xe8s"}):s.state.invalidForm?Object(a.jsx)(p.a,{variant:"warning",children:"Des champs ne sont pas valides"}):s.state.existName?Object(a.jsx)(p.a,{variant:"warning",children:"Un produit poss\xe8de d\xe9j\xe0 le m\xeame nom"}):s.state.error?Object(a.jsx)(p.a,{variant:"danger",children:"Une erreur a eu lieu, r\xe9essayer ou contactez-nous"}):void 0},s.state={show:!0,name:"",price:"",type:"Boissons",unit:"",inStock:"",isLoading:!1,success:!1,invalidForm:!1,existName:!1,error:!1},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(V.a,{show:this.state.show,onHide:this._handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(V.a.Header,{closeButton:!0,children:Object(a.jsx)(V.a.Title,{children:"Ajouter un produit"})}),Object(a.jsxs)(V.a.Body,{style:{fontSize:15},children:[Object(a.jsxs)(b.a.Group,{controlId:"name",children:[Object(a.jsx)(b.a.Label,{children:"Nom: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleName,value:this.state.name,type:"text",placeholder:"Le nom du produit...","aria-label":"Nom","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"type",children:[Object(a.jsx)(b.a.Label,{children:"Type: "}),Object(a.jsxs)("select",{id:"type",className:"form-control",onChange:this._handleType,children:[Object(a.jsx)("option",{value:"Spiritueux",children:"Spiritueux"}),Object(a.jsx)("option",{value:"Cigarettes",children:"Cigarettes"}),Object(a.jsx)("option",{value:"Boissons",selected:!0,children:"Boissons"}),Object(a.jsx)("option",{value:"Pl\xe2ts",children:"Pl\xe2ts"})]})]}),Object(a.jsxs)(b.a.Group,{controlId:"price",children:[Object(a.jsx)(b.a.Label,{children:"Prix (en $): "}),Object(a.jsx)(b.a.Control,{onChange:this._handlePrice,value:this.state.price,type:"number",placeholder:"Le prix du produit...","aria-label":"price","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"inStock",children:[Object(a.jsx)(b.a.Label,{children:"Stock actuel: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleInStock,value:this.state.inStock,type:"number",placeholder:"Le nombre de produit en stock...","aria-label":"inStock","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"unit",children:[Object(a.jsx)(b.a.Label,{children:"Unit\xe9 (Portions, Bouteille, Assiette): "}),Object(a.jsx)(b.a.Control,{onChange:this._handleUnit,value:this.state.unit,type:"text",placeholder:"L'unit\xe9 du produit...","aria-label":"unit","aria-describedby":"btnSubmit"})]}),this._displayAlert()]}),Object(a.jsxs)(V.a.Footer,{children:[this._displayButton(),Object(a.jsx)(h.a,{variant:"danger",onClick:this._handleClose,children:"Fermer"})]})]})}}]),n}(i.a.Component),he=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleClose=function(){s.props.callback?s.props.callback():s.setState({show:!1})},s._handleName=function(e){s.setState({name:e.target.value})},s._handlePrice=function(e){s.setState({price:e.target.value})},s._handleType=function(e){s.setState({type:e.target.value})},s._handleUnit=function(e){s.setState({unit:e.target.value})},s._handleBuyPrice=function(e){s.setState({buyPrice:e.target.value})},s._displayButton=function(){return s.state.name.length>=2&&s.state.name.length<=70&&("Spiritueux"===s.state.type||"Boissons"===s.state.type||"Pl\xe2ts"===s.state.type||"Cigarettes"===s.state.type)&&Q.a.isNumber(Number(s.state.price))&&Q.a.isNumber(Number(s.state.inStock))&&s.state.unit.length>=2&&s.state.unit.length<=70&&!s.state.isLoading?Object(a.jsx)(h.a,{variant:"success",onClick:s._onClick,children:"Confirmer"}):Object(a.jsx)(h.a,{variant:"success",disabled:!0,children:"Confirmer"})},s._onClick=function(e){e.preventDefault(),s.setState({isLoading:!0});var t={name:s.state.name,price:Number(s.state.price),type:s.state.type,unit:s.state.unit,buyPrice:s.state.buyPrice};(function(e,t,n){var a={method:"PUT",body:JSON.stringify(n),headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/json; charset=UTF-8"})};return fetch("".concat(x,"/products/").concat(t),a).then((function(e){return e.json()}))})(S.a.get("token"),s.props.data.idProduct,t).then((function(e){e.update?(s.setState({isLoading:!1,success:!0,invalidForm:!1,existName:!1,error:!1}),setTimeout((function(){window.location.reload()}),750)):e.invalidForm?s.setState({isLoading:!1,success:!1,invalidForm:!0,existName:!1,error:!1}):e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):e.existName?s.setState({isLoading:!1,success:!1,invalidForm:!1,existName:!0,error:!1}):s.setState({isLoading:!1,success:!1,invalidForm:!1,existName:!1,error:!0})})).catch((function(){s.setState({isLoading:!1,success:!1,invalidForm:!1,existName:!1,error:!0})}))},s._displayAlert=function(){return s.state.success?Object(a.jsx)(p.a,{variant:"success",children:"Produit modifi\xe9 avec succ\xe8s"}):s.state.invalidForm?Object(a.jsx)(p.a,{variant:"warning",children:"Des champs ne sont pas valides"}):s.state.existName?Object(a.jsx)(p.a,{variant:"warning",children:"Un produit poss\xe8de d\xe9j\xe0 le m\xeame nom"}):s.state.error?Object(a.jsx)(p.a,{variant:"danger",children:"Une erreur a eu lieu, r\xe9essayer ou contactez-nous"}):void 0},s._displayOption=function(){return"Spiritueux"===s.state.type?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("option",{value:"Spiritueux",selected:!0,children:"Spiritueux"}),Object(a.jsx)("option",{value:"Cigarettes",children:"Cigarettes"}),Object(a.jsx)("option",{value:"Boissons",children:"Boissons"}),Object(a.jsx)("option",{value:"Pl\xe2ts",children:"Pl\xe2ts"})]}):"Boissons"===s.state.type?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("option",{value:"Spiritueux",children:"Spiritueux"}),Object(a.jsx)("option",{value:"Cigarettes",children:"Cigarettes"}),Object(a.jsx)("option",{value:"Boissons",selected:!0,children:"Boissons"}),Object(a.jsx)("option",{value:"Pl\xe2ts",children:"Pl\xe2ts"})]}):"Pl\xe2ts"===s.state.type?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("option",{value:"Spiritueux",children:"Spiritueux"}),Object(a.jsx)("option",{value:"Cigarettes",children:"Cigarettes"}),Object(a.jsx)("option",{value:"Boissons",children:"Boissons"}),Object(a.jsx)("option",{value:"Pl\xe2ts",selected:!0,children:"Pl\xe2ts"})]}):"Cigarettes"===s.state.type?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("option",{value:"Spiritueux",children:"Spiritueux"}),Object(a.jsx)("option",{value:"Cigarettes",selected:!0,children:"Cigarettes"}),Object(a.jsx)("option",{value:"Boissons",children:"Boissons"}),Object(a.jsx)("option",{value:"Pl\xe2ts",children:"Pl\xe2ts"})]}):void 0},s.state={show:!0,name:s.props.data.name,price:parseInt(s.props.data.price),type:s.props.data.type,unit:s.props.data.unit,buyPrice:s.props.data.buyPrice,isLoading:!1,success:!1,invalidForm:!1,existName:!1,error:!1},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(V.a,{show:this.state.show,onHide:this._handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(V.a.Header,{closeButton:!0,children:Object(a.jsx)(V.a.Title,{children:"Modifier un produit"})}),Object(a.jsxs)(V.a.Body,{style:{fontSize:15},children:[Object(a.jsxs)(b.a.Group,{controlId:"name",children:[Object(a.jsx)(b.a.Label,{children:"Nom: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleName,value:this.state.name,type:"text",placeholder:"Le nom du produit...","aria-label":"Nom","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"type",children:[Object(a.jsx)(b.a.Label,{children:"Type: "}),Object(a.jsx)("select",{id:"type",className:"form-control",onChange:this._handleType,children:this._displayOption()})]}),Object(a.jsxs)(b.a.Group,{controlId:"price",children:[Object(a.jsx)(b.a.Label,{children:"Prix (en $): "}),Object(a.jsx)(b.a.Control,{onChange:this._handlePrice,value:this.state.price,type:"number",placeholder:"Le prix du produit...","aria-label":"price","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"unit",children:[Object(a.jsx)(b.a.Label,{children:"Unit\xe9 (Portions, Bouteille, Assiette): "}),Object(a.jsx)(b.a.Control,{onChange:this._handleUnit,value:this.state.unit,type:"text",placeholder:"L'unit\xe9 du produit...","aria-label":"unit","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"buyPrice",children:[Object(a.jsx)(b.a.Label,{children:"Prix d'achat commun (en $): "}),Object(a.jsx)(b.a.Control,{onChange:this._handleBuyPrice,value:this.state.buyPrice,type:"number",placeholder:"Le prix d'achat du produit...","aria-label":"buyPrice","aria-describedby":"btnSubmit"})]}),this._displayAlert()]}),Object(a.jsxs)(V.a.Footer,{children:[this._displayButton(),Object(a.jsx)(h.a,{variant:"danger",onClick:this._handleClose,children:"Fermer"})]})]})}}]),n}(i.a.Component),je=n(100),be=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={isLoading:!0,data:[],error:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=["#838B8B","#668B8B","#2F4F4F","#528B8B"];(function(e){var t={method:"GET",headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/products/special/type/most-popular-type"),t).then((function(e){return e.json()}))})(S.a.get("token")).then((function(n){if(console.log("===================================="),console.log(n),console.log("===================================="),n.find){var a=[];for(var s in n.result)a.push({title:n.result[s].nameOfType,value:n.result[s].value_occurrence,color:t[s]});e.setState({error:!1,isLoading:!1,data:a})}else e.setState({error:!0,isLoading:!1})})).catch((function(){e.setState({error:!0,isLoading:!1})}))}},{key:"render",value:function(){return this.state.isLoading?Object(a.jsx)(C.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})}):this.state.error?Object(a.jsx)("em",{children:"Une erreur a eu lieu r\xe9esayez ou contactez-nous"}):Object(a.jsx)(je.PieChart,{data:this.state.data,labelStyle:{fill:"#fff",opacity:.75,pointerEvents:"none",fontSize:"25%"},labelPosition:50,label:function(e){var t=e.dataEntry;return t.title+" "+Math.round(t.percentage)+"%"}})}}]),n}(i.a.Component),pe=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={isLoading:!0,data:null,error:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=["#838B8B","#668B8B","#2F4F4F","#528B8B"];(function(e){var t={method:"GET",headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/products/special/most-popular"),t).then((function(e){return e.json()}))})(S.a.get("token")).then((function(n){if(n.find){var a=[],s=[],i=[],r=[];for(var o in n.result.drinks)a.push({title:n.result.drinks[o].nameOfProduct,value:n.result.drinks[o].value_occurrence,color:t[o]});for(var c in n.result.spirits)s.push({title:n.result.spirits[c].nameOfProduct,value:n.result.spirits[c].value_occurrence,color:t[c]});for(var l in n.result.dishes)i.push({title:n.result.dishes[l].nameOfProduct,value:n.result.dishes[l].value_occurrence,color:t[l]});for(var d in n.result.cigarettes)r.push({title:n.result.cigarettes[d].nameOfProduct,value:n.result.cigarettes[d].value_occurrence,color:t[d]});e.setState({error:!1,isLoading:!1,data:{drinks:a,spirits:s,dishes:i,cigarettes:r}})}else e.setState({error:!0,isLoading:!1})})).catch((function(t){console.log("===================================="),console.log(t),console.log("===================================="),e.setState({error:!0,isLoading:!1})}))}},{key:"render",value:function(){return this.state.isLoading?Object(a.jsx)(C.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})}):this.state.error?Object(a.jsx)("em",{children:"Une erreur a eu lieu r\xe9esayez ou contactez-nous"}):Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Boissons: "}),Object(a.jsx)("div",{style:{width:"40vh",alignItems:"center"},children:Object(a.jsx)(je.PieChart,{data:this.state.data.drinks,labelStyle:{fill:"#fff",opacity:.75,pointerEvents:"none",fontSize:"25%"},labelPosition:50,label:function(e){var t=e.dataEntry;return t.title+" "+Math.round(t.percentage)+"%"}})}),Object(a.jsx)("h3",{children:"Spiritueux: "}),Object(a.jsx)("div",{style:{width:"40vh",alignItems:"center"},children:Object(a.jsx)(je.PieChart,{data:this.state.data.spirits,labelStyle:{fill:"#fff",opacity:.75,pointerEvents:"none",fontSize:"25%"},labelPosition:50,label:function(e){var t=e.dataEntry;return t.title+" "+Math.round(t.percentage)+"%"}})}),Object(a.jsx)("h3",{children:"Pl\xe2ts: "}),Object(a.jsx)("div",{style:{width:"40vh",alignItems:"center"},children:Object(a.jsx)(je.PieChart,{data:this.state.data.dishes,labelStyle:{fill:"#fff",opacity:.75,pointerEvents:"none",fontSize:"25%"},labelPosition:50,label:function(e){var t=e.dataEntry;return t.title+" "+Math.round(t.percentage)+"%"}})}),Object(a.jsx)("h3",{children:"Cigarettes: "}),Object(a.jsx)("div",{style:{width:"40vh",alignItems:"center"},children:Object(a.jsx)(je.PieChart,{data:this.state.data.cigarettes,labelStyle:{fill:"#fff",opacity:.75,pointerEvents:"none",fontSize:"25%"},labelPosition:50,label:function(e){var t=e.dataEntry;return t.title+" "+Math.round(t.percentage)+"%"}})})]})}}]),n}(i.a.Component),fe=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e))._addUser=function(){a.setState({addMode:!0,editMode:!1})},a._onUpdate=function(e){a.infoEdit=e,a.setState({addMode:!1,editMode:!0})},a._onClose=function(){a.setState({addMode:!1,editMode:!1})},document.title="Le Consulat - Produits",a.state={addMode:!1,editMode:!1},a.infoEdit=null,a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){X()}},{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Produits"}),Object(a.jsxs)(h.a,{variant:"success",onClick:this._addUser,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter un produit"]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(de,{onUpdate:this._onUpdate}),this.state.addMode?Object(a.jsx)(ue,{callback:this._onClose}):null,this.state.editMode?Object(a.jsx)(he,{callback:this._onClose,data:this.infoEdit}):null,Object(a.jsx)("br",{}),Object(a.jsx)("h2",{children:"Types de produit les plus vendues: "}),Object(a.jsx)("div",{style:{width:"40vh",alignItems:"center"},children:Object(a.jsx)(be,{})}),Object(a.jsx)("h2",{children:"Les produits les plus vendues par type: "}),Object(a.jsx)(pe,{}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]})]})}}]),n}(i.a.Component),me=n(29),Oe=n.n(me),ve=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleType=function(e){s.setState({type:e.target.value},(function(){if(s.state.type=e.target.value,"all"===s.state.type)s.setState({toDisplay:s.state.info});else{var t=Oe.a.filter(s.state.info,(function(e){return e.type===s.state.type}));s.setState({toDisplay:t})}}))},s._displayType=function(){return Object(a.jsxs)(a.Fragment,{children:["Type:"," ",Object(a.jsxs)("select",{onChange:s._handleType,children:[Object(a.jsx)("option",{value:"all",selected:!0,children:"Tout"}),Object(a.jsx)("option",{value:"Boissons",children:"Boissons"}),Object(a.jsx)("option",{value:"Pl\xe2ts",children:"Pl\xe2ts"}),Object(a.jsx)("option",{value:"Spiritueux",children:"Spiritueux"}),Object(a.jsx)("option",{value:"Cigarettes",children:"Cigarettes"})]})]})},document.title="Le Consulat - Stocks",s.state={info:[],toDisplay:[],isLoading:!0,error:!1,type:"all"},s.columns=[{title:"Nom",field:"name"},{title:"Stock",field:"inStock"}],s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;ce(S.a.get("token")).then((function(t){t.find?e.setState({info:t.result,toDisplay:t.result,isLoading:!1,error:!1}):e.setState({error:!0})})).catch((function(){e.setState({error:!0})}))}},{key:"render",value:function(){return this.state.error?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Stocks"}),Object(a.jsx)("em",{children:"Une erreur a eu lieu, r\xe9essayez plus tard ou contactez-nous"})]})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Stocks"}),this._displayType(),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("a",{href:"/application/print/".concat(this.state.type),target:"_blank",className:"btn btn-primary",children:"Imprimer"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a,{title:"Stocks",data:this.state.toDisplay,columns:this.columns,options:{search:!0,paging:!1,filtering:!0,exportButton:!0},isLoading:this.state.isLoading})]})]})}}]),n}(i.a.Component),xe=n(35),ge=n.n(xe),ye=n(62),Se=n.n(ye);n(421);function ke(e){var t={method:"GET",headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/transactions"),t).then((function(e){return e.json()}))}function Ce(e,t,n,a){var s={method:"POST",body:JSON.stringify(e),headers:new Headers({Authorization:"Bearer "+t,"Content-type":"application/json; charset=UTF-8"})};return"enter"===n?fetch("".concat(x,"/transactions/").concat(a,"/enter"),s).then((function(e){return e.json()})):"outlet"===n?fetch("".concat(x,"/transactions/").concat(a,"/outlet"),s).then((function(e){return e.json()})):void 0}var we=n(121),Le=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e))._handle=function(e){a.props.onChange(e.value.idProduct,e.value)},a.state={products:null,isLoading:!0},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(oe.a)(re.a.mark((function e(){var t,n=this;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,ce(S.a.get("token")).then((function(e){if(e.find){for(var a in e.result)t.push({value:e.result[a],label:e.result[a].name});n.setState({isLoading:!1,products:t},n.props.default?function(){}:function(){n.props.onChange(n.state.products[0].value.idProduct,n.state.products[0].value)})}else alert("Une erreur eu lieu, r\xe9essayez ou contactez-nous")})).catch((function(){alert("Une erreur eu lieu, r\xe9essayez ou contactez-nous")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.isLoading?Object(a.jsx)(C.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})}):this.state.products.length<1?(alert("Vous n'avez aucun produit commencez par en ajouter un"),void window.location.reload()):this.props.default?Object(a.jsx)(we.a,{defaultValue:this.props.default,options:this.state.products,onChange:this._handle}):Object(a.jsx)(we.a,{options:this.state.products,onChange:this._handle})}}]),n}(i.a.Component),_e=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleClose=function(){s.props.callback?s.props.callback():s.setState({show:!1})},s._handleIdProduct=function(e,t){console.log("===================================="),console.log(t.buyPrice),console.log("===================================="),s.setState({idProduct:e,buyPrice:t.buyPrice})},s._handleType=function(e){s.setState({type:e.target.value})},s._handleQuantity=function(e){s.setState({quantity:e.target.value})},s._handleBuyPrice=function(e){s.setState({buyPrice:e.target.value})},s._handleDescription=function(e){s.setState({description:e.target.value})},s._displayButton=function(){return s.state.description.length>=2&&s.state.description.length<=90&&Q.a.isString(s.state.description)&&Q.a.isNumber(Number(s.state.quantity))&&!s.state.isLoading?"enter"===s.state.type&&s.state.buyPrice<=0?Object(a.jsxs)(h.a,{variant:"success",disabled:!0,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]}):Object(a.jsxs)(h.a,{variant:"success",onClick:s._onClick,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]}):Object(a.jsxs)(h.a,{variant:"success",disabled:!0,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]})},s._onClick=function(e){e.preventDefault(),s.setState({isLoading:!0}),Ce("enter"===s.state.type?{quantity:Number(s.state.quantity),buyPrice:Number(s.state.buyPrice),description:s.state.description}:{quantity:Number(s.state.quantity),description:s.state.description},S.a.get("token"),s.state.type,s.state.idProduct).then((function(e){e.create?(s.setState({isLoading:!1,success:!0,invalidForm:!1,productNotFound:!1,negativeStock:!1,error:!1}),setTimeout((function(){window.location.reload()}),750)):e.invalidForm?s.setState({isLoading:!1,success:!1,invalidForm:!0,productNotFound:!1,negativeStock:!1,error:!1}):e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):e.productNotFound?s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!0,negativeStock:!1,error:!1}):e.negativeStock?s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!1,negativeStock:!0,error:!1}):s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!1,negativeStock:!1,error:!0})})).catch((function(){s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!1,negativeStock:!1,error:!0})}))},s._displayAlert=function(){return s.state.success?Object(a.jsx)(p.a,{variant:"success",children:"Transaction ajout\xe9 avec succ\xe8s"}):s.state.invalidForm?Object(a.jsx)(p.a,{variant:"warning",children:"Des champs ne sont pas valides"}):s.state.productNotFound?Object(a.jsx)(p.a,{variant:"warning",children:"Le produit que vous avez choisi n'existe pas, essayez de recharger la page, ou contactez-nous"}):s.state.negativeStock?Object(a.jsx)(p.a,{variant:"warning",children:"Le stock sera n\xe9gatif si vous faites la transaction"}):s.state.error?Object(a.jsx)(p.a,{variant:"danger",children:"Une erreur a eu lieu, r\xe9essayer ou contactez-nous"}):void 0},s._displayBuyPrice=function(){if("enter"===s.state.type)return Object(a.jsxs)(b.a.Group,{controlId:"buyPrice",children:[Object(a.jsx)(b.a.Label,{children:"Prix d'achat (en $): "}),Object(a.jsx)(b.a.Control,{onChange:s._handleBuyPrice,value:s.state.buyPrice,type:"text",placeholder:"Le prix d'achat du produit...","aria-label":"buyPrice","aria-describedby":"btnSubmit"})]})},s.state={show:!0,idProduct:"",type:"enter",quantity:1,buyPrice:"",description:"",isLoading:!1,success:!1,invalidForm:!1,negativeStock:!1,productNotFound:!1,error:!1},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(V.a,{show:this.state.show,onHide:this._handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(V.a.Header,{closeButton:!0,children:Object(a.jsx)(V.a.Title,{children:"Ajouter une transaction"})}),Object(a.jsxs)(V.a.Body,{style:{fontSize:15},children:[Object(a.jsxs)(b.a.Group,{controlId:"name",children:[Object(a.jsx)(b.a.Label,{children:"Produits: "}),Object(a.jsx)(Le,{onChange:this._handleIdProduct})]}),Object(a.jsxs)(b.a.Group,{controlId:"type",children:[Object(a.jsx)(b.a.Label,{children:"Type: "}),Object(a.jsxs)("select",{id:"type",className:"form-control",onChange:this._handleType,children:[Object(a.jsx)("option",{value:"enter",selected:!0,children:"Entr\xe9e"}),Object(a.jsx)("option",{value:"outlet",children:"Sortie"})]})]}),this._displayBuyPrice(),Object(a.jsxs)(b.a.Group,{controlId:"quantity",children:[Object(a.jsx)(b.a.Label,{children:"Quantit\xe9: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleQuantity,value:this.state.quantity,type:"number",placeholder:"La quantit\xe9...","aria-label":"quantity","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"description",children:[Object(a.jsx)(b.a.Label,{children:"Libell\xe9: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleDescription,value:this.state.description,type:"text",placeholder:"Libell\xe9 de la transaction...","aria-label":"description","aria-describedby":"btnSubmit"})]}),this._displayAlert()]}),Object(a.jsxs)(V.a.Footer,{children:[this._displayButton(),Object(a.jsx)(h.a,{variant:"danger",onClick:this._handleClose,children:"Fermer"})]})]})}}]),n}(i.a.Component),Fe=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleBegin=function(e){var t=ge()(e);s.setState({begin:e,beginInTimestamp:t.unix()},(function(){var e=Oe.a.filter(s.state.transaction,(function(e){return e.timestamp>=s.state.beginInTimestamp&&e.timestamp<=s.state.endInTimestamp}));s.setState({transactionToFilter:e})}))},s._handleEnd=function(e){var t=ge()(e);s.setState({end:e,endInTimestamp:t.unix()},(function(){var e=Oe.a.filter(s.state.transaction,(function(e){return e.timestamp>=s.state.beginInTimestamp&&e.timestamp<=s.state.endInTimestamp}));s.setState({transactionToFilter:e})}))},s._display=function(){return s.state.error?"Une erreur a eu lieu, r\xe9essayez ou contactez-nous":Object(a.jsx)(E.a,{title:"Transaction",data:s.state.transactionToFilter,columns:s.columns,options:{search:!0,paging:!0,filtering:!0,exportButton:!0},isLoading:s.state.isLoading})},s._addTransaction=function(){s.setState({addMode:!0})},s._onClose=function(){s.setState({addMode:!1})},s.state={begin:null,beginInTimestamp:null,end:null,endInTimestamp:null,addMode:!1,transaction:[],transactionToFilter:[],isLoading:!0,error:!1},document.title="Consulat - Transactions",s.columns=[{title:"Produit",field:"nameOfProduct"},{title:"Utilisateur",field:"nameOfUser"},{title:"Stock",field:"stock"},{title:"Entr\xe9e",field:"enter"},{title:"Sortie",field:"outlet"},{title:"Solde",field:"stockAfter"},{title:"Libell\xe9",field:"description"},{title:"Date",field:"date2"}],s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;X((function(){ke(S.a.get("token")).then((function(t){if(t.find){var n=[];for(var a in t.result){var s=ge.a.unix(parseInt(t.result[a].timestamp));n.push(Object(A.a)(Object(A.a)({},t.result[a]),{},{date2:s.format("DD/MM/yyyy [\xe0] HH:mm"),stock:t.result[a].stockAfter-t.result[a].enter+t.result[a].outlet}))}e.setState({transaction:n,isLoading:!1,error:!1})}else t.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):e.setState({transaction:[],isLoading:!1,error:!0})})).catch((function(){e.setState({transaction:[],isLoading:!1,error:!0})}))}))}},{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Transactions"}),Object(a.jsxs)(h.a,{variant:"success",onClick:this._addTransaction,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter une transaction"]})," ",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),"Les transactions  du ",Object(a.jsx)(Se.a,{selected:this.state.begin,dateFormat:"dd/MM/yyyy",onChange:this._handleBegin,withPortal:!0})," ","au"," ",Object(a.jsx)(Se.a,{selected:this.state.end,dateFormat:"dd/MM/yyyy",onChange:this._handleEnd,withPortal:!0}),Object(a.jsx)("br",{}),this._display()]}),this.state.addMode?Object(a.jsx)(_e,{callback:this._onClose}):null]})}}]),n}(i.a.Component),Te=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._addUser=function(){s.setState({addMode:!0})},s._onClose=function(){s.setState({addMode:!1})},s._didMount=function(){(function(e,t,n){var a={method:"GET",headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/transactions/report/").concat(t,"/").concat(n),a).then((function(e){return e.json()}))})(S.a.get("token"),s.beginInTimestamp,s.endInTimestamp).then((function(e){if(e.find){var t=[];for(var n in e.result)t.push(Object(A.a)(Object(A.a)({},e.result[n]),{},{solde:Number(e.result[n].stock)+Number(e.result[n].totalEnter)-Number(e.result[n].totalOutlet)}));s.setState({error:!1,isLoading:!1,data:t})}else s.setState({error:!0,isLoading:!1})})).catch((function(){s.setState({error:!0,isLoading:!1})}))},s._handleBegin=function(e){s.setState({isLoading:!0,begin:e},(function(){var t=ge()(e);s.beginInTimestamp=t.unix(),Oe.a.isNull(s.state.end)||s._didMount()}))},s._handleEnd=function(e){s.setState({isLoading:!0,end:e},(function(){var t=ge()(e);s.endInTimestamp=t.unix(),Oe.a.isNull(s.state.begin)||s._didMount()}))},s._display=function(){return s.state.isLoading?Object(a.jsx)(C.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})}):s.state.error?Object(a.jsx)("em",{children:"Une erreur a eu lieu veuillez r\xe9essayez plus tard"}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(E.a,{title:"Transactions",data:s.state.data,columns:s.columns,options:{search:!0,paging:!0,filtering:!0,exportButton:!0},isLoading:s.state.isLoading})})},document.title="Le Consulat - Transactions",s.state={addMode:!1,isLoading:!0,data:null,error:!1,end:null,begin:null},s.beginInTimestamp=null,s.endInTimestamp=null,s.columns=[{title:"Produit",field:"nameOfProduct"},{title:"Stock",field:"stock"},{title:"Entr\xe9e",field:"totalEnter"},{title:"Sortie",field:"totalOutlet"},{title:"Solde",field:"solde"}],s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){X()}},{key:"render",value:function(){return console.log(this.state),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Transactions"}),Object(a.jsxs)(h.a,{variant:"success",onClick:this._addUser,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter une transaction"]})," ",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),"Les transactions  du ",Object(a.jsx)(Se.a,{selected:this.state.begin,dateFormat:"dd/MM/yyyy",onChange:this._handleBegin,withPortal:!0})," ","au"," ",Object(a.jsx)(Se.a,{selected:this.state.end,dateFormat:"dd/MM/yyyy",onChange:this._handleEnd,withPortal:!0}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),this._display(),this.state.addMode?Object(a.jsx)(_e,{callback:this._onClose}):null]})]})}}]),n}(i.a.Component),Ne=function(e){g(S.a.get("idUser"),S.a.get("token")).then((function(t){t.find?1===t.result.level||2===t.result.level?e&&e(t.result):(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):(alert("Une erreur a eu lieu"),window.location.href="/application/")})).catch((function(){alert("Une erreur a eu lieu"),window.location.href="/application/"}))},Pe=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleClose=function(){s.props.callback?s.props.callback():s.setState({show:!1})},s._handleIdProduct=function(e){s.setState({idProduct:e})},s._handleQuantity=function(e){s.setState({quantity:e.target.value})},s._handleDescription=function(e){s.setState({description:e.target.value})},s._displayButton=function(){return s.state.description.length>=2&&s.state.description.length<=90&&Q.a.isString(s.state.description)&&Q.a.isNumber(Number(s.state.quantity))&&!s.state.isLoading?Object(a.jsxs)(h.a,{variant:"success",onClick:s._onClick,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]}):Object(a.jsxs)(h.a,{variant:"success",disabled:!0,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]})},s._onClick=function(e){e.preventDefault(),s.setState({isLoading:!0}),Ce({quantity:Number(s.state.quantity),description:s.state.description},S.a.get("token"),"enter",s.state.idProduct).then((function(e){e.create?(s.setState({isLoading:!1,success:!0,invalidForm:!1,productNotFound:!1,negativeStock:!1,error:!1}),setTimeout((function(){window.location.reload()}),750)):e.invalidForm?s.setState({isLoading:!1,success:!1,invalidForm:!0,productNotFound:!1,negativeStock:!1,error:!1}):e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):e.productNotFound?s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!0,negativeStock:!1,error:!1}):e.negativeStock?s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!1,negativeStock:!0,error:!1}):s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!1,negativeStock:!1,error:!0})})).catch((function(){s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!1,negativeStock:!1,error:!0})}))},s._displayAlert=function(){return s.state.success?Object(a.jsx)(p.a,{variant:"success",children:"Transaction ajout\xe9 avec succ\xe8s"}):s.state.invalidForm?Object(a.jsx)(p.a,{variant:"warning",children:"Des champs ne sont pas valides"}):s.state.productNotFound?Object(a.jsx)(p.a,{variant:"warning",children:"Le produit que vous avez choisi n'existe pas, essayez de recharger la page, ou contactez-nous"}):s.state.negativeStock?Object(a.jsx)(p.a,{variant:"warning",children:"Le stock sera n\xe9gatif si vous faites la transaction"}):s.state.error?Object(a.jsx)(p.a,{variant:"danger",children:"Une erreur a eu lieu, r\xe9essayer ou contactez-nous"}):void 0},s.state={show:!0,idProduct:"",quantity:1,description:"",isLoading:!1,success:!1,invalidForm:!1,negativeStock:!1,productNotFound:!1,error:!1},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(V.a,{show:this.state.show,onHide:this._handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(V.a.Header,{closeButton:!0,children:Object(a.jsx)(V.a.Title,{children:"Ajouter une entr\xe9e"})}),Object(a.jsxs)(V.a.Body,{style:{fontSize:15},children:[Object(a.jsxs)(b.a.Group,{controlId:"name",children:[Object(a.jsx)(b.a.Label,{children:"Produits: "}),Object(a.jsx)(Le,{onChange:this._handleIdProduct})]}),Object(a.jsxs)(b.a.Group,{controlId:"quantity",children:[Object(a.jsx)(b.a.Label,{children:"Quantit\xe9: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleQuantity,value:this.state.quantity,type:"number",placeholder:"La quantit\xe9...","aria-label":"quantity","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"description",children:[Object(a.jsx)(b.a.Label,{children:"Libell\xe9: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleDescription,value:this.state.description,type:"text",placeholder:"Libell\xe9 de la transaction...","aria-label":"description","aria-describedby":"btnSubmit"})]}),this._displayAlert()]}),Object(a.jsxs)(V.a.Footer,{children:[this._displayButton(),Object(a.jsx)(h.a,{variant:"danger",onClick:this._handleClose,children:"Fermer"})]})]})}}]),n}(i.a.Component),Ue=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleBegin=function(e){var t=ge()(e);s.setState({begin:e,beginInTimestamp:t.unix()},(function(){var e=Oe.a.filter(s.state.transaction,(function(e){return e.timestamp>=s.state.beginInTimestamp&&e.timestamp<=s.state.endInTimestamp}));s.setState({transactionToFilter:e})}))},s._handleEnd=function(e){var t=ge()(e);s.setState({end:e,endInTimestamp:t.unix()},(function(){var e=Oe.a.filter(s.state.transaction,(function(e){return e.timestamp>=s.state.beginInTimestamp&&e.timestamp<=s.state.endInTimestamp}));s.setState({transactionToFilter:e})}))},s._display=function(){return s.state.error?"Une erreur a eu lieu, r\xe9essayez ou contactez-nous":Object(a.jsx)(E.a,{title:"Transaction",data:s.state.transactionToFilter,columns:s.columns,options:{search:!0,paging:!0,filtering:!0,exportButton:!0},isLoading:s.state.isLoading})},s._addTransaction=function(){s.setState({addMode:!0})},s._onClose=function(){s.setState({addMode:!1})},s.state={begin:null,beginInTimestamp:null,end:null,endInTimestamp:null,addMode:!1,transaction:[],transactionToFilter:[],isLoading:!0,error:!1},document.title="Consulat - Transactions",s.columns=[{title:"Produit",field:"nameOfProduct"},{title:"Utilisateur",field:"nameOfUser"},{title:"Stock",field:"stock"},{title:"Entr\xe9e",field:"enter"},{title:"Sortie",field:"outlet"},{title:"Solde",field:"stockAfter"},{title:"Libell\xe9",field:"description"},{title:"Date",field:"date2"}],s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;Ne((function(){ke(S.a.get("token")).then((function(t){if(t.find){var n=[];for(var a in t.result){var s=ge.a.unix(parseInt(t.result[a].timestamp));n.push(Object(A.a)(Object(A.a)({},t.result[a]),{},{date2:s.format("DD/MM/yyyy [\xe0] HH:mm"),stock:t.result[a].stockAfter-t.result[a].enter+t.result[a].outlet}))}e.setState({transaction:n,isLoading:!1,error:!1})}else t.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):e.setState({transaction:[],isLoading:!1,error:!0})})).catch((function(){e.setState({transaction:[],isLoading:!1,error:!0})}))}))}},{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Transactions"}),Object(a.jsxs)(h.a,{variant:"success",onClick:this._addTransaction,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter une entr\xe9e"]})," ",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),"Les transactions  du ",Object(a.jsx)(Se.a,{selected:this.state.begin,dateFormat:"dd/MM/yyyy",onChange:this._handleBegin,withPortal:!0})," ","au"," ",Object(a.jsx)(Se.a,{selected:this.state.end,dateFormat:"dd/MM/yyyy",onChange:this._handleEnd,withPortal:!0}),Object(a.jsx)("br",{}),this._display()]}),this.state.addMode?Object(a.jsx)(Pe,{callback:this._onClose}):null]})}}]),n}(i.a.Component),Ie=n(636);function Me(e){var t={method:"GET",headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/sessions/get/notFinished"),t).then((function(e){return e.json()}))}function ze(e){var t={method:"GET",headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/sessions/get/notPaid"),t).then((function(e){return e.json()}))}function Be(e,t){var n={method:"GET",headers:new Headers({Authorization:"Bearer "+t,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/sessions/").concat(e),n).then((function(e){return e.json()}))}function Ae(e,t){var n={method:"GET",headers:new Headers({Authorization:"Bearer "+t,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/sessions/").concat(e,"/items"),n).then((function(e){return e.json()}))}function De(e,t,n){var a={method:"GET",headers:new Headers({Authorization:"Bearer "+t,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/sessions/").concat(e,"/items/").concat(n,"/accompaniment"),a).then((function(e){return e.json()}))}var Ee=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleClose=function(){s.props.callback?s.props.callback():s.setState({show:!1})},s._handleIdProduct=function(e){s.setState({idProduct:e})},s._handleQuantity=function(e){var t=e.target;s.setState({quantity:t.value})},s._onClick=function(e){e.preventDefault(),s.setState({isLoading:!0}),function(e,t,n){var a={method:"PUT",body:JSON.stringify(e),headers:new Headers({Authorization:"Bearer "+t,"Content-type":"application/json; charset=UTF-8"})};return fetch("".concat(x,"/sessions/").concat(n,"/addItem"),a).then((function(e){return e.json()}))}({idProduct:s.state.idProduct,quantity:Number(s.state.quantity)},S.a.get("token"),s.idSession).then((function(e){e.create?(s.setState({isLoading:!1,success:!0,invalidForm:!1,productNotFound:!1,negativeStock:!1,error:!1}),setTimeout((function(){window.location.reload()}),750)):e.invalidForm?s.setState({isLoading:!1,success:!1,invalidForm:!0,productNotFound:!1,negativeStock:!1,error:!1}):e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):e.productNotFound?s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!0,negativeStock:!1,error:!1}):e.negativeStock?s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!1,negativeStock:!0,error:!1}):s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!1,negativeStock:!1,error:!0})})).catch((function(){s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!1,error:!0})}))},s._displayAlert=function(){return s.state.success?Object(a.jsx)(p.a,{variant:"success",children:"\xc9l\xe9ment ajout\xe9e avec succ\xe8s"}):s.state.invalidForm?Object(a.jsx)(p.a,{variant:"warning",children:"Des champs ne sont pas valides"}):s.state.productNotFound?Object(a.jsx)(p.a,{variant:"warning",children:"Le produit choisit n'a pas \xe9t\xe9 trouv\xe9"}):s.state.negativeStock?Object(a.jsx)(p.a,{variant:"warning",children:"Le stock sera n\xe9gatif si vous faites la transaction"}):s.state.error?Object(a.jsx)(p.a,{variant:"danger",children:"Une erreur a eu lieu, r\xe9essayer ou contactez-nous"}):void 0},s._displayButton=function(){return s.state.isLoading?Object(a.jsxs)(h.a,{variant:"success",disabled:!0,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]}):Object(a.jsxs)(h.a,{variant:"success",onClick:s._onClick,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]})},s.state={show:!0,idProduct:"",quantity:1,isLoading:!1,negativeStock:!1,success:!1,invalidForm:!1,productNotFound:!1,error:!1},s.idSession=s.props.idSession,s}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(V.a,{show:this.state.show,onHide:this._handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(V.a.Header,{closeButton:!0,children:Object(a.jsx)(V.a.Title,{children:"Ajouter un article a une session"})}),Object(a.jsxs)(V.a.Body,{style:{fontSize:15},children:[Object(a.jsxs)(b.a.Group,{controlId:"product",children:[Object(a.jsx)(b.a.Label,{children:"Produits: "}),Object(a.jsx)(Le,{onChange:this._handleIdProduct})]}),Object(a.jsxs)(b.a.Group,{controlId:"quantity",children:[Object(a.jsx)(b.a.Label,{children:"Quantit\xe9: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleQuantity,value:this.state.quantity,type:"number",placeholder:"La quantit\xe9...","aria-label":"quantity","aria-describedby":"btnSubmit"})]}),this._displayAlert()]}),Object(a.jsxs)(V.a.Footer,{children:[this._displayButton(),Object(a.jsx)(h.a,{variant:"danger",onClick:this._handleClose,children:"Fermer"})]})]})}}]),n}(i.a.Component),He=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleClose=function(){s.props.callback?s.props.callback():s.setState({show:!1})},s._handleIdProduct=function(e){s.setState({idProduct:e})},s._handleQuantity=function(e){var t=e.target;s.setState({quantity:t.value})},s._onClick=function(e){e.preventDefault(),s.setState({isLoading:!0}),function(e,t,n,a){var s={method:"PUT",body:JSON.stringify(e),headers:new Headers({Authorization:"Bearer "+t,"Content-type":"application/json; charset=UTF-8"})};return fetch("".concat(x,"/sessions/").concat(n,"/item/").concat(a),s).then((function(e){return e.json()}))}({idProduct:s.state.idProduct,quantity:Number(s.state.quantity)},S.a.get("token"),s.idSession,s.idSessionItem).then((function(e){e.update?(s.setState({isLoading:!1,success:!0,invalidForm:!1,productNotFound:!1,negativeStock:!1,error:!1}),setTimeout((function(){window.location.reload()}),750)):e.invalidForm?s.setState({isLoading:!1,success:!1,invalidForm:!0,productNotFound:!1,negativeStock:!1,error:!1}):e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):e.productNotFound?s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!0,negativeStock:!1,error:!1}):e.negativeStock?s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!1,negativeStock:!0,error:!1}):s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!1,negativeStock:!1,error:!0})})).catch((function(){s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!1,error:!0})}))},s._displayAlert=function(){return s.state.success?Object(a.jsx)(p.a,{variant:"success",children:"\xc9l\xe9ment modifi\xe9 avec succ\xe8s"}):s.state.invalidForm?Object(a.jsx)(p.a,{variant:"warning",children:"Des champs ne sont pas valides"}):s.state.productNotFound?Object(a.jsx)(p.a,{variant:"warning",children:"Le produit choisit n'a pas \xe9t\xe9 trouv\xe9"}):s.state.negativeStock?Object(a.jsx)(p.a,{variant:"warning",children:"Le stock sera n\xe9gatif si vous faites la transaction"}):s.state.error?Object(a.jsx)(p.a,{variant:"danger",children:"Une erreur a eu lieu, r\xe9essayer ou contactez-nous"}):void 0},s._displayButton=function(){return s.state.isLoading?Object(a.jsxs)(h.a,{variant:"success",disabled:!0,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]}):Object(a.jsxs)(h.a,{variant:"success",onClick:s._onClick,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]})},s.state={show:!0,idProduct:s.props.data.idProduct,quantity:s.props.data.quantity,isLoading:!1,success:!1,invalidForm:!1,negativeStock:!1,productNotFound:!1,error:!1},s.idSession=s.props.data.idSession,s.idSessionItem=s.props.data.idSessionsItem,s}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(V.a,{show:this.state.show,onHide:this._handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(V.a.Header,{closeButton:!0,children:Object(a.jsx)(V.a.Title,{children:"Ajouter un article a une session"})}),Object(a.jsxs)(V.a.Body,{style:{fontSize:15},children:[Object(a.jsxs)(b.a.Group,{controlId:"product",children:[Object(a.jsx)(b.a.Label,{children:"Produits: "}),Object(a.jsx)(Le,{onChange:this._handleIdProduct,default:this.state.idProduct})]}),Object(a.jsxs)(b.a.Group,{controlId:"quantity",children:[Object(a.jsx)(b.a.Label,{children:"Quantit\xe9: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleQuantity,value:this.state.quantity,type:"number",placeholder:"La quantit\xe9...","aria-label":"quantity","aria-describedby":"btnSubmit"})]}),this._displayAlert()]}),Object(a.jsxs)(V.a.Footer,{children:[this._displayButton(),Object(a.jsx)(h.a,{variant:"danger",onClick:this._handleClose,children:"Fermer"})]})]})}}]),n}(i.a.Component),Ge=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleClose=function(){s.props.callback?s.props.callback():s.setState({show:!1})},s._handleIdProduct=function(e){s.setState({idProduct:e})},s._handleQuantity=function(e){var t=e.target;s.setState({quantity:t.value})},s._onClick=function(e){e.preventDefault(),s.setState({isLoading:!0}),function(e,t,n,a){var s={method:"PUT",body:JSON.stringify(e),headers:new Headers({Authorization:"Bearer "+t,"Content-type":"application/json; charset=UTF-8"})};return fetch("".concat(x,"/sessions/").concat(n,"/item/").concat(a,"/addAccompaniment"),s).then((function(e){return e.json()}))}({idProduct:s.state.idProduct,quantity:Number(s.state.quantity)},S.a.get("token"),s.idSession,s.idSessionItem).then((function(e){e.create?(s.setState({isLoading:!1,success:!0,invalidForm:!1,productNotFound:!1,negativeStock:!1,error:!1}),setTimeout((function(){window.location.reload()}),750)):e.invalidForm?s.setState({isLoading:!1,success:!1,invalidForm:!0,productNotFound:!1,negativeStock:!1,error:!1}):e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):e.productNotFound?s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!0,negativeStock:!1,error:!1}):e.negativeStock?s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!1,negativeStock:!0,error:!1}):s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!1,negativeStock:!1,error:!0})})).catch((function(){s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!1,negativeStock:!1,error:!0})}))},s._displayAlert=function(){return s.state.success?Object(a.jsx)(p.a,{variant:"success",children:"Accompagnement ajout\xe9 avec succ\xe8s"}):s.state.invalidForm?Object(a.jsx)(p.a,{variant:"warning",children:"Des champs ne sont pas valides"}):s.state.productNotFound?Object(a.jsx)(p.a,{variant:"warning",children:"Le produit choisit n'a pas \xe9t\xe9 trouv\xe9"}):s.state.negativeStock?Object(a.jsx)(p.a,{variant:"warning",children:"Le stock sera n\xe9gatif si vous faites la transaction"}):s.state.error?Object(a.jsx)(p.a,{variant:"danger",children:"Une erreur a eu lieu, r\xe9essayer ou contactez-nous"}):void 0},s._displayButton=function(){return s.state.isLoading?Object(a.jsxs)(h.a,{variant:"success",disabled:!0,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]}):Object(a.jsxs)(h.a,{variant:"success",onClick:s._onClick,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]})},s.state={show:!0,idProduct:"",quantity:1,isLoading:!1,negativeStock:!1,success:!1,invalidForm:!1,productNotFound:!1,error:!1},s.idSession=s.props.data.idSession,s.idSessionItem=s.props.data.idSessionsItem,s}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(V.a,{show:this.state.show,onHide:this._handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(V.a.Header,{closeButton:!0,children:Object(a.jsx)(V.a.Title,{children:"Ajouter un Accompagnement a un article"})}),Object(a.jsxs)(V.a.Body,{style:{fontSize:15},children:[Object(a.jsxs)(b.a.Group,{controlId:"product",children:[Object(a.jsx)(b.a.Label,{children:"Produits: "}),Object(a.jsx)(Le,{onChange:this._handleIdProduct})]}),Object(a.jsxs)(b.a.Group,{controlId:"quantity",children:[Object(a.jsx)(b.a.Label,{children:"Quantit\xe9: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleQuantity,value:this.state.quantity,type:"number",placeholder:"La quantit\xe9...","aria-label":"quantity","aria-describedby":"btnSubmit"})]}),this._displayAlert()]}),Object(a.jsxs)(V.a.Footer,{children:[this._displayButton(),Object(a.jsx)(h.a,{variant:"danger",onClick:this._handleClose,children:"Fermer"})]})]})}}]),n}(i.a.Component),qe=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleClose=function(){s.props.callback?s.props.callback():s.setState({show:!1})},s._display=function(){if(s.state.isLoading)return Object(a.jsx)(C.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})});if(s.state.error)return Object(a.jsx)("em",{children:"Une erreur a eu lieu, r\xe9essayez ou contactez-nous"});if(s.state.accompaniments.length<1)return Object(a.jsx)("em",{children:"Aucun accompagnement"});var e=[];for(var t in s.state.accompaniments)e.push(Object(a.jsxs)("li",{children:[Object(a.jsx)("b",{children:"Nom"}),": ",s.state.accompaniments[t].productInfo.name,Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"Quantit\xe9"}),": ",s.state.accompaniments[t].quantity,Object(a.jsx)("br",{})]}));return Object(a.jsxs)("ol",{children:[e," "]})},s.state={show:!0,accompaniments:[],isLoading:!1,error:!1},s.idSessionItem=s.props.data.idSessionsItem,s.idSession=s.props.data.idSession,s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(oe.a)(re.a.mark((function e(){var t,n=this;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],De(this.idSession,S.a.get("token"),this.idSessionItem).then(function(){var e=Object(oe.a)(re.a.mark((function e(a){var s,i;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.find){e.next=11;break}s=re.a.mark((function e(s){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(S.a.get("token"),a.result[s].idProduct).then((function(e){e.find?t.push(Object(A.a)(Object(A.a)({},a.result[s]),{},{productInfo:e.result})):n.setState({error:!0,isLoading:!1})})).catch((function(){n.setState({error:!0,isLoading:!1})}));case 2:case"end":return e.stop()}}),e)})),e.t0=re.a.keys(a.result);case 3:if((e.t1=e.t0()).done){e.next=8;break}return i=e.t1.value,e.delegateYield(s(i),"t2",6);case 6:e.next=3;break;case 8:n.setState({accompaniments:t,isLoading:!1,error:!1}),e.next=12;break;case 11:a.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):n.setState({error:!0,isLoading:!1});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){n.setState({error:!0,isLoading:!1})}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(a.jsxs)(V.a,{show:this.state.show,onHide:this._handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(V.a.Header,{closeButton:!0,children:Object(a.jsx)(V.a.Title,{children:"Accompagnement"})}),Object(a.jsx)(V.a.Body,{style:{fontSize:15},children:this._display()}),Object(a.jsx)(V.a.Footer,{children:Object(a.jsx)(h.a,{variant:"danger",onClick:this._handleClose,children:"Fermer"})})]})}}]),n}(i.a.Component),Re=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleClose=function(){s.props.callback?s.props.callback():s.setState({show:!1})},s._handleReduction=function(e){s.setState({reduction:e.target.value})},s._onClick=function(e){e.preventDefault(),s.setState({isLoading:!0}),function(e,t,n){var a={method:"PUT",body:JSON.stringify(e),headers:new Headers({Authorization:"Bearer "+t,"Content-type":"application/json; charset=UTF-8"})};return fetch("".concat(x,"/sessions/").concat(n,"/reduction"),a).then((function(e){return e.json()}))}({reduction:Number(s.state.reduction)},S.a.get("token"),s.props.idSession).then((function(e){e.update?(s.setState({isLoading:!1,success:!0,invalidForm:!1,error:!1}),setTimeout((function(){window.location.reload()}),750)):e.invalidForm?s.setState({isLoading:!1,success:!1,invalidForm:!0,error:!1}):e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):s.setState({isLoading:!1,success:!1,invalidForm:!1,error:!0})})).catch((function(){s.setState({isLoading:!1,success:!1,invalidForm:!1,error:!0})}))},s._displayAlert=function(){return s.state.success?Object(a.jsx)(p.a,{variant:"success",children:"R\xe9duction ajout\xe9e avec succ\xe8s"}):s.state.invalidForm?Object(a.jsx)(p.a,{variant:"warning",children:"Des champs ne sont pas valides"}):s.state.error?Object(a.jsx)(p.a,{variant:"danger",children:"Une erreur a eu lieu, r\xe9essayer ou contactez-nous"}):void 0},s._displayButton=function(){return Q.a.isNumber(Number(s.state.reduction))&&!s.state.isLoading?Object(a.jsxs)(h.a,{variant:"success",onClick:s._onClick,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]}):Object(a.jsxs)(h.a,{variant:"success",disabled:!0,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]})},s.state={show:!0,reduction:s.props.default,isLoading:!1,success:!1,invalidForm:!1,error:!1},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(V.a,{show:this.state.show,onHide:this._handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(V.a.Header,{closeButton:!0,children:Object(a.jsx)(V.a.Title,{children:"Ajouter une r\xe9duction"})}),Object(a.jsxs)(V.a.Body,{style:{fontSize:15},children:[Object(a.jsxs)(b.a.Group,{controlId:"reduction",children:[Object(a.jsx)(b.a.Label,{children:"Montant: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleReduction,value:this.state.reduction,type:"number",placeholder:"Le montant de la r\xe9duction...","aria-label":"reduction","aria-describedby":"btnSubmit"})]}),this._displayAlert()]}),Object(a.jsxs)(V.a.Footer,{children:[this._displayButton(),Object(a.jsx)(h.a,{variant:"danger",onClick:this._handleClose,children:"Fermer"})]})]})}}]),n}(i.a.Component),$e=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e))._handle=function(e){a.props.onChange(e)},a.state={clients:null,isLoading:!0},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(oe.a)(re.a.mark((function e(){var t,n=this;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,ee(S.a.get("token")).then((function(e){if(e.find){for(var a in t.push({value:"Inconnu",label:"Client inconnu"}),e.result)t.push({value:e.result[a].idClient,label:e.result[a].name});t.push(),n.setState({isLoading:!1,clients:t})}else alert("Une erreur eu lieu, r\xe9essayez ou contactez-nous")})).catch((function(){alert("Une erreur eu lieu, r\xe9essayez ou contactez-nous")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.isLoading?Object(a.jsx)(C.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})}):this.state.clients.length<1?(alert("Vous n'avez aucun produit commencez par en ajouter un"),void window.location.reload()):this.props.default?Object(a.jsx)(we.a,{defaultValue:this.props.default,options:this.state.clients,onChange:this._handle}):Object(a.jsx)(we.a,{options:this.state.clients,onChange:this._handle})}}]),n}(i.a.Component),Ve=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleClose=function(){s.props.callback?s.props.callback():s.setState({show:!1})},s._handleIdClient=function(e){s.setState({idClient:e.value})},s._handleServer=function(e){var t=e.target;s.setState({server:t.value})},s._onClick=function(e){e.preventDefault(),s.setState({isLoading:!0}),function(e,t,n){var a={method:"PUT",body:JSON.stringify(e),headers:new Headers({Authorization:"Bearer "+t,"Content-type":"application/json; charset=UTF-8"})};return fetch("".concat(x,"/sessions/").concat(n),a).then((function(e){return e.json()}))}("Inconnu"===s.state.idClient?{nameOfServer:s.state.server}:{idClient:s.state.idClient,nameOfServer:s.state.server},S.a.get("token"),s.props.data.idSession).then((function(e){e.update?(s.setState({isLoading:!1,success:!0,invalidForm:!1,clientNotFound:!1,negativeStock:!1,error:!1}),setTimeout((function(){window.location.reload()}),750)):e.invalidForm?s.setState({isLoading:!1,success:!1,invalidForm:!0,clientNotFound:!1,negativeStock:!1,error:!1}):e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):e.clientNotFound?s.setState({isLoading:!1,success:!1,invalidForm:!1,clientNotFound:!0,negativeStock:!1,error:!1}):e.negativeStock?s.setState({isLoading:!1,success:!1,invalidForm:!1,clientNotFound:!1,negativeStock:!0,error:!1}):s.setState({isLoading:!1,success:!1,invalidForm:!1,clientNotFound:!1,negativeStock:!1,error:!0})})).catch((function(){s.setState({isLoading:!1,success:!1,invalidForm:!1,clientNotFound:!1,negativeStock:!1,error:!0})}))},s._displayAlert=function(){return s.state.success?Object(a.jsx)(p.a,{variant:"success",children:"Session modifi\xe9e avec succ\xe8s"}):s.state.invalidForm?Object(a.jsx)(p.a,{variant:"warning",children:"Des champs ne sont pas valides"}):s.state.clientNotFound?Object(a.jsx)(p.a,{variant:"warning",children:"Le client choisit n'a pas \xe9t\xe9 trouv\xe9"}):s.state.negativeStock?Object(a.jsx)(p.a,{variant:"warning",children:"Le stock sera n\xe9gatif si vous faites la transaction"}):s.state.error?Object(a.jsx)(p.a,{variant:"danger",children:"Une erreur a eu lieu, r\xe9essayer ou contactez-nous"}):void 0},s._displayButton=function(){return s.state.server.length>0&&s.state.server.length<=75&&!s.state.isLoading?Object(a.jsx)(h.a,{variant:"success",onClick:s._onClick,children:"Confirmer"}):Object(a.jsx)(h.a,{variant:"success",disabled:!0,children:"Confirmer"})},s.state={show:!0,idClient:s.props.data.idClient,server:"CHRISTELLE",isLoading:!1,success:!1,invalidForm:!1,negativeStock:!1,clientNotFound:!1,error:!1},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(V.a,{show:this.state.show,onHide:this._handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(V.a.Header,{closeButton:!0,children:Object(a.jsx)(V.a.Title,{children:"Modfier une session"})}),Object(a.jsxs)(V.a.Body,{style:{fontSize:15},children:[Object(a.jsxs)(b.a.Group,{controlId:"name",children:[Object(a.jsx)(b.a.Label,{children:"Client: "}),Object(a.jsx)($e,{onChange:this._handleIdClient,default:this.props.data.idClient})]}),Object(a.jsxs)(b.a.Group,{controlId:"nameOfServer",children:[Object(a.jsx)(b.a.Label,{children:"Nom du serveur/serveuse: "}),Object(a.jsxs)("select",{onChange:this._handleServer,id:"nameOfServer",className:"form-control",children:[Object(a.jsx)("option",{value:"CHRISTELLE",selected:!0,children:"CHRISTELLE"}),Object(a.jsx)("option",{value:"EXAUC\xc9E",children:"EXAUC\xc9E"}),Object(a.jsx)("option",{value:"SANDRA",children:"SANDRA"})]})]}),this._displayAlert()]}),Object(a.jsxs)(V.a.Footer,{children:[this._displayButton(),Object(a.jsx)(h.a,{variant:"danger",onClick:this._handleClose,children:"Fermer"})]})]})}}]),n}(i.a.Component),Je=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._updateItem=function(e){s.editInfo=e,s.setState({editMode:!0})},s._addAccompaniment=function(e){s.accompInfo=e,s.setState({accompMode:!0})},s._viewAccompaniment=function(e){s.accompViewInfo=e,s.setState({accompViewMode:!0})},s._deleteItem=function(e){console.log("===================================="),console.log(e),console.log("===================================="),window.confirm("\xcates vous s\xfbre de vouloir supprimer cet \xe9l\xe9ment?")&&function(e,t,n){var a={method:"DELETE",headers:new Headers({Authorization:"Bearer "+e})};return fetch("".concat(x,"/sessions/").concat(t,"/items/").concat(n),a).then((function(e){return e.json()}))}(S.a.get("token"),e.idSession,e.idSessionsItem).then((function(e){console.log("===================================="),console.log(e),console.log("===================================="),e.delete?window.location.reload():e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):alert("Une erreur a eu lieu lors de l'op\xe9ration, r\xe9essayez ou contactez nous")})).catch((function(){alert("Une erreur a eu lieu lors de l'op\xe9ration, r\xe9essayez ou contactez nous")}))},s._displayItem=function(){if(s.state.sessionItem.length<1)return Object(a.jsx)("em",{children:"Aucun \xe9l\xe9ment"});var e=[];if(1===s.state.sessionInfo.wasOver){var t=function(t){e.push(Object(a.jsxs)(Ie.a.Item,{style:{fontSize:13.5},children:[Object(a.jsx)("h4",{style:{marginBottom:-1},children:s.state.sessionItem[t].nameOfProduct}),"Quantit\xe9: ",s.state.sessionItem[t].quantity,Object(a.jsx)("br",{}),"Prix: ",s.state.sessionItem[t].price,"$",Object(a.jsx)("br",{}),"Total: ",s.state.sessionItem[t].quantity*s.state.sessionItem[t].price,"$",Object(a.jsx)("br",{}),Object(a.jsx)("a",{href:"#",onClick:function(){s._addAccompaniment(s.state.sessionItem[t])},children:"Ajouter un accompagnement"}),Object(a.jsx)("br",{}),Object(a.jsx)("a",{href:"#",onClick:function(){s._viewAccompaniment(s.state.sessionItem[t])},children:"Voir les accompagnements"})]}))};for(var n in s.state.sessionItem)t(n)}else{var i=function(t){e.push(Object(a.jsxs)(Ie.a.Item,{style:{fontSize:13.5},children:[Object(a.jsxs)("h4",{style:{marginBottom:-1},children:[s.state.sessionItem[t].nameOfProduct," ",Object(a.jsx)("a",{style:{fontSize:18},href:"#",onClick:function(){s._updateItem(s.state.sessionItem[t])},children:"Modifier"})," ",Object(a.jsx)("a",{style:{fontSize:18},onClick:function(){s._deleteItem(s.state.sessionItem[t])},href:"#",children:"Supprimer"})]}),"Quantit\xe9: ",s.state.sessionItem[t].quantity,Object(a.jsx)("br",{}),"Prix: ",s.state.sessionItem[t].price,"$",Object(a.jsx)("br",{}),"Total: ",s.state.sessionItem[t].quantity*s.state.sessionItem[t].price,"$",Object(a.jsx)("br",{}),Object(a.jsx)("a",{href:"#",onClick:function(){s._addAccompaniment(s.state.sessionItem[t])},children:"Ajouter un accompagnement"}),Object(a.jsx)("br",{}),Object(a.jsx)("a",{href:"#",onClick:function(){s._viewAccompaniment(s.state.sessionItem[t])},children:"Voir les accompagnements"})]}))};for(var r in s.state.sessionItem)i(r)}return e},s._addItem=function(){s.setState({addMode:!0})},s._onClose=function(){s.setState({addMode:!1,editMode:!1,accompMode:!1,accompViewMode:!1,reductionMode:!1,editSessionMode:!1})},s._finish=function(){(function(e,t){var n={method:"PUT",headers:new Headers({Authorization:"Bearer "+e,"Content-type":"application/json; charset=UTF-8"})};return fetch("".concat(x,"/sessions/").concat(t,"/finish"),n).then((function(e){return e.json()}))})(S.a.get("token"),s.idSession).then((function(e){e.update?window.location.reload():e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):alert("Une erreur a eu lieu lors de l'op\xe9ration, r\xe9essayez ou contactez nous")})).catch((function(){alert("Une erreur a eu lieu lors de l'op\xe9ration, r\xe9essayez ou contactez nous")}))},s._finishAndPay=function(){(function(e,t){var n={method:"PUT",headers:new Headers({Authorization:"Bearer "+e,"Content-type":"application/json; charset=UTF-8"})};return fetch("".concat(x,"/sessions/").concat(t,"/finishAndPay"),n).then((function(e){return e.json()}))})(S.a.get("token"),s.idSession).then((function(e){e.update?window.location.reload():e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):alert("Une erreur a eu lieu lors de l'op\xe9ration, r\xe9essayez ou contactez nous")})).catch((function(){alert("Une erreur a eu lieu lors de l'op\xe9ration, r\xe9essayez ou contactez nous")}))},s._pay=function(){(function(e,t){var n={method:"PUT",headers:new Headers({Authorization:"Bearer "+e,"Content-type":"application/json; charset=UTF-8"})};return fetch("".concat(x,"/sessions/").concat(t,"/pay"),n).then((function(e){return e.json()}))})(S.a.get("token"),s.idSession).then((function(e){e.update?window.location.reload():e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):alert("Une erreur a eu lieu lors de l'op\xe9ration, r\xe9essayez ou contactez nous")})).catch((function(){alert("Une erreur a eu lieu lors de l'op\xe9ration, r\xe9essayez ou contactez nous")}))},s._addReduction=function(){s.setState({reductionMode:!0})},s._reductionToZero=function(){(function(e,t){var n={method:"PUT",headers:new Headers({Authorization:"Bearer "+e,"Content-type":"application/json; charset=UTF-8"})};return fetch("".concat(x,"/sessions/").concat(t,"/reductionToZero"),n).then((function(e){return e.json()}))})(S.a.get("token"),s.idSession).then((function(e){e.update?window.location.reload():e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):alert("Une erreur a eu lieu lors de l'op\xe9ration, r\xe9essayez ou contactez nous")})).catch((function(){alert("Une erreur a eu lieu lors de l'op\xe9ration, r\xe9essayez ou contactez nous")}))},s._editSession=function(){s.setState({editSessionMode:!0})},s._displayButton=function(){return 1===s.state.sessionInfo.wasOver&&s.state.sessionInfo.beenPaid?null:1===s.state.sessionInfo.wasOver?Object(a.jsx)(h.a,{variant:"warning",onClick:s._pay,children:"Pay\xe9e"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(h.a,{variant:"danger",onClick:s._finish,children:"Termin\xe9e"})," ",Object(a.jsx)(h.a,{variant:"warning",onClick:s._finishAndPay,children:"Termin\xe9e et pay\xe9e"})," ",Object(a.jsx)(h.a,{variant:"secondary",onClick:s._editSession,children:"Modifier"})," ",Object(a.jsx)(h.a,{variant:"primary",onClick:s._addReduction,children:s.state.sessionInfo.reduction>=0?"Ajouter une r\xe9duction":"Modifier la r\xe9duction"})," ",s.state.sessionInfo.reduction>0?Object(a.jsx)(h.a,{variant:"info",onClick:s._reductionToZero,children:"Remettre la r\xe9duction \xe0 0"}):null]})},s._displayButton2=function(){return 1===s.state.sessionInfo.wasOver?null:Object(a.jsxs)(h.a,{variant:"success",onClick:s._addItem,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter un \xe9l\xe9ment"]})},s._displayIframe=function(){if(1===s.state.sessionInfo.wasOver)return Object(a.jsx)("object",{data:s.state.sessionInfo.invoiceUrl,type:"application/pdf",width:"50%",height:"500px",children:Object(a.jsx)("embed",{src:s.state.sessionInfo.invoiceUrl,type:"application/pdf"})})},s.state={sessionInfo:{},sessionItem:[],isLoading:!0,addMode:!1,editMode:!1,editSessionMode:!1,accompMode:!1,accompViewMode:!1,reductionMode:!1,error:!1},s.idSession=s.props.match.params.idSession,document.title="Le Consulat - Sessions",s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(oe.a)(re.a.mark((function e(){var t=this;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be(this.idSession,S.a.get("token")).then(function(){var e=Object(oe.a)(re.a.mark((function e(n){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.find){e.next=5;break}return e.next=3,Ae(t.idSession,S.a.get("token")).then((function(e){e.find?t.setState({isLoading:!1,error:!1,sessionInfo:n.result[0],sessionItem:e.result}):t.setState({isLoading:!1,error:!0,sessionInfo:[],sessionItem:{}})})).catch((function(){t.setState({isLoading:!1,error:!0,sessionInfo:[],sessionItem:{}})}));case 3:e.next=6;break;case 5:t.setState({isLoading:!1,error:!0,sessionInfo:[],sessionItem:{}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){t.setState({isLoading:!1,error:!0,sessionInfo:[],sessionItem:{}})}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(this.state.isLoading)return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Session"}),Object(a.jsx)(C.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})})]})]});if(this.state.error)return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Session"}),Object(a.jsx)("em",{children:"Une erreur a eu lieu, r\xe9essayez ou contactez-nous"})]})]});var e=this.state.sessionInfo,t=ge.a.unix(parseInt(e.timestamp));return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Session"}),this._displayIframe(),Object(a.jsx)("br",{}),this._displayButton(),Object(a.jsx)("h2",{children:"Information sur la session"}),Object(a.jsxs)("table",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)("b",{children:"Clients: "})}),Object(a.jsx)("td",{children:e.nameOfClient})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)("b",{children:"Serveur/Serveuse: "})}),Object(a.jsx)("td",{children:e.nameOfServer})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)("b",{children:"Utilisateur: "})}),Object(a.jsx)("td",{children:e.nameOfUser})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)("b",{children:"Date: "})}),Object(a.jsx)("td",{children:t.format("DD/MM/yyyy [\xe0] HH:mm")})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)("b",{children:"Total sans r\xe9duction: "})}),Object(a.jsxs)("td",{children:[e.total,"$"]})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)("b",{children:"R\xe9duction: "})}),Object(a.jsxs)("td",{children:[e.reduction,"$"]})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)("b",{children:"Total: "})}),Object(a.jsxs)("td",{children:[e.total-e.reduction,"$"]})]})]}),Object(a.jsx)("br",{}),Object(a.jsx)("h2",{children:"\xc9lement de la session"}),Object(a.jsxs)(Ie.a,{style:{width:"25rem"},children:[this._displayButton2(),this._displayItem()]}),this.state.addMode?Object(a.jsx)(Ee,{idSession:this.idSession,callback:this._onClose}):null,this.state.editMode?Object(a.jsx)(He,{data:this.editInfo,callback:this._onClose}):null,this.state.accompMode?Object(a.jsx)(Ge,{data:this.accompInfo,callback:this._onClose}):null,this.state.accompViewMode?Object(a.jsx)(qe,{data:this.accompViewInfo,callback:this._onClose}):null,this.state.reductionMode?Object(a.jsx)(Re,{idSession:this.state.sessionInfo.idSession,default:this.state.sessionInfo.reduction,callback:this._onClose}):null,this.state.editSessionMode?Object(a.jsx)(Ve,{data:this.state.sessionInfo,callback:this._onClose}):null,Object(a.jsx)(U,{})]})]})}}]),n}(i.a.Component),Ye=n(637),Qe=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this))._displayCards=function(){if(e.state.sessions.length<1)return Object(a.jsx)("em",{children:"Aucune session en cours"});var t=[],n=function(n){var s=ge.a.unix(parseInt(e.state.sessions[n].timestamp));t.push(Object(a.jsx)(Ye.a,{className:"col-12 col-lg-3",children:Object(a.jsxs)(Ye.a.Body,{children:[Object(a.jsx)(Ye.a.Title,{children:e.state.sessions[n].nameOfClient}),Object(a.jsxs)(Ye.a.Text,{children:["Utilisateur: ",e.state.sessions[n].nameOfUser,Object(a.jsx)("br",{}),"Date: ",s.format("DD/MM/yyyy [\xe0] HH:mm"),Object(a.jsx)("br",{}),"Total sans r\xe9duction: ",e.state.sessions[n].total,"$",Object(a.jsx)("br",{}),"Reduction: ",e.state.sessions[n].reduction,"$",Object(a.jsx)("br",{}),"Total: ",e.state.sessions[n].total-e.state.sessions[n].reduction,"$",Object(a.jsx)("br",{})]}),Object(a.jsxs)(h.a,{variant:"primary",onClick:function(){window.location.href="/application/sessions/get/".concat(e.state.sessions[n].idSession)},children:["Voir plus ",Object(a.jsx)("i",{class:"fas fa-arrow-right"})]})]})}))};for(var s in e.state.sessions)n(s);return t},e._display=function(){return e.state.isLoading?Object(a.jsx)(C.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})}):e.state.error?Object(a.jsx)("em",{children:"Nous sommes d\xe9sol\xe9 mais une erreur a eu lieu, r\xe9essayez ou contactez-nous"}):Object(a.jsx)("div",{className:"row",children:e._displayCards()})},e.state={sessions:[],isLoading:!0,error:!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(oe.a)(re.a.mark((function e(){var t=this;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return[],e.next=3,Me(S.a.get("token")).then(function(){var e=Object(oe.a)(re.a.mark((function e(n){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.find?t.setState({sessions:n.result,isLoading:!1,error:!1}):t.setState({sessions:[],isLoading:!1,error:!0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){t.setState({sessions:[],isLoading:!1,error:!0})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(a.jsx)(a.Fragment,{children:this._display()})}}]),n}(i.a.Component),Ke=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleClose=function(){s.props.callback?s.props.callback():s.setState({show:!1})},s._handleIdClient=function(e){s.setState({idClient:e.value})},s._handleServer=function(e){var t=e.target;s.setState({server:t.value})},s._onClick=function(e){e.preventDefault(),s.setState({isLoading:!0}),function(e,t){var n={method:"POST",body:JSON.stringify(e),headers:new Headers({Authorization:"Bearer "+t,"Content-type":"application/json; charset=UTF-8"})};return fetch("".concat(x,"/sessions"),n).then((function(e){return e.json()}))}("Inconnu"===s.state.idClient?{nameOfServer:s.state.server}:{idClient:s.state.idClient,nameOfServer:s.state.server},S.a.get("token")).then((function(e){e.create?(s.setState({isLoading:!1,success:!0,invalidForm:!1,clientNotFound:!1,negativeStock:!1,error:!1}),setTimeout((function(){window.location.reload()}),750)):e.invalidForm?s.setState({isLoading:!1,success:!1,invalidForm:!0,clientNotFound:!1,negativeStock:!1,error:!1}):e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):e.clientNotFound?s.setState({isLoading:!1,success:!1,invalidForm:!1,clientNotFound:!0,negativeStock:!1,error:!1}):e.negativeStock?s.setState({isLoading:!1,success:!1,invalidForm:!1,clientNotFound:!1,negativeStock:!0,error:!1}):s.setState({isLoading:!1,success:!1,invalidForm:!1,clientNotFound:!1,negativeStock:!1,error:!0})})).catch((function(){s.setState({isLoading:!1,success:!1,invalidForm:!1,clientNotFound:!1,negativeStock:!1,error:!0})}))},s._displayAlert=function(){return s.state.success?Object(a.jsx)(p.a,{variant:"success",children:"Session commenc\xe9e avec succ\xe8s"}):s.state.invalidForm?Object(a.jsx)(p.a,{variant:"warning",children:"Des champs ne sont pas valides"}):s.state.clientNotFound?Object(a.jsx)(p.a,{variant:"warning",children:"Le client choisit n'a pas \xe9t\xe9 trouv\xe9"}):s.state.negativeStock?Object(a.jsx)(p.a,{variant:"warning",children:"Le stock sera n\xe9gatif si vous faites la transaction"}):s.state.error?Object(a.jsx)(p.a,{variant:"danger",children:"Une erreur a eu lieu, r\xe9essayer ou contactez-nous"}):void 0},s._displayButton=function(){return s.state.server.length>0&&s.state.server.length<=75&&!s.state.isLoading?Object(a.jsxs)(h.a,{variant:"success",onClick:s._onClick,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]}):Object(a.jsxs)(h.a,{variant:"success",disabled:!0,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]})},s.state={show:!0,idClient:"",server:"CHRISTELLE",isLoading:!1,success:!1,invalidForm:!1,negativeStock:!1,clientNotFound:!1,error:!1},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(V.a,{show:this.state.show,onHide:this._handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(V.a.Header,{closeButton:!0,children:Object(a.jsx)(V.a.Title,{children:"Commencer une session"})}),Object(a.jsxs)(V.a.Body,{style:{fontSize:15},children:[Object(a.jsxs)(b.a.Group,{controlId:"name",children:[Object(a.jsx)(b.a.Label,{children:"Client: "}),Object(a.jsx)($e,{onChange:this._handleIdClient})]}),Object(a.jsxs)(b.a.Group,{controlId:"nameOfServer",children:[Object(a.jsx)(b.a.Label,{children:"Nom du serveur/serveuse: "}),Object(a.jsxs)("select",{onChange:this._handleServer,id:"nameOfServer",className:"form-control",children:[Object(a.jsx)("option",{value:"CHRISTELLE",selected:!0,children:"CHRISTELLE"}),Object(a.jsx)("option",{value:"EXAUC\xc9E",children:"EXAUC\xc9E"}),Object(a.jsx)("option",{value:"SANDRA",children:"SANDRA"})]})]}),this._displayAlert()]}),Object(a.jsxs)(V.a.Footer,{children:[this._displayButton(),Object(a.jsx)(h.a,{variant:"danger",onClick:this._handleClose,children:"Fermer"})]})]})}}]),n}(i.a.Component),We=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e))._addSession=function(){a.setState({addMode:!0})},a._onClose=function(){a.setState({addMode:!1})},a.state={addMode:!1},document.title="Le Consulat - Sessions",a}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Sessions en cours"}),Object(a.jsxs)(h.a,{variant:"success",onClick:this._addSession,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Commencer une nouvelle session"]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(Qe,{}),Object(a.jsx)(U,{})]}),this.state.addMode?Object(a.jsx)(Ke,{callback:this._onClose}):null]})}}]),n}(i.a.Component),Xe=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this))._displayCards=function(){if(e.state.sessions.length<1)return Object(a.jsx)("em",{children:"Aucune session trouv\xe9e"});var t=[],n=function(n){var s=ge.a.unix(parseInt(e.state.sessions[n].timestamp));t.push(Object(a.jsx)(Ye.a,{className:"col-12 col-lg-3",children:Object(a.jsxs)(Ye.a.Body,{children:[Object(a.jsx)(Ye.a.Title,{children:e.state.sessions[n].nameOfClient}),Object(a.jsxs)(Ye.a.Text,{children:["Utilisateur: ",e.state.sessions[n].nameOfUser,Object(a.jsx)("br",{}),"Date: ",s.format("DD/MM/yyyy [\xe0] HH:mm"),Object(a.jsx)("br",{}),"Total sans r\xe9duction: ",e.state.sessions[n].total,"$",Object(a.jsx)("br",{}),"Reduction: ",e.state.sessions[n].reduction,"$",Object(a.jsx)("br",{}),"Total: ",e.state.sessions[n].total-e.state.sessions[n].reduction,"$",Object(a.jsx)("br",{})]}),Object(a.jsxs)(h.a,{variant:"primary",onClick:function(){window.location.href="/application/sessions/get/".concat(e.state.sessions[n].idSession)},children:["Voir plus ",Object(a.jsx)("i",{class:"fas fa-arrow-right"})]})]})}))};for(var s in e.state.sessions)n(s);return t},e._display=function(){return e.state.isLoading?Object(a.jsx)(C.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})}):e.state.error?Object(a.jsx)("em",{children:"Nous sommes d\xe9sol\xe9 mais une erreur a eu lieu, r\xe9essayez ou contactez-nous"}):e._displayCards()},e.state={sessions:[],isLoading:!0,error:!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(oe.a)(re.a.mark((function e(){var t=this;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return[],e.next=3,ze(S.a.get("token")).then(function(){var e=Object(oe.a)(re.a.mark((function e(n){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.find?t.setState({sessions:n.result,isLoading:!1,error:!1}):t.setState({sessions:[],isLoading:!1,error:!0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){t.setState({sessions:[],isLoading:!1,error:!0})}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(a.jsx)(a.Fragment,{children:this._display()})}}]),n}(i.a.Component),Ze=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),a=t.call(this,e),document.title="Le Consulat - Sessions",a}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Sessions non pay\xe9"}),Object(a.jsx)(Xe,{})]})]})}}]),n}(i.a.Component),et=n(635),tt=function(e){return e.show?Object(a.jsxs)("h4",{children:["Recette des ventes: ",Oe.a.isNull(e.recipe)?"0$":"".concat(e.recipe,"$")]}):null},nt=function(e){return e.show?Object(a.jsxs)("h4",{children:["Recette total: ",Oe.a.isNull(e.recipe)?"0$":"".concat(e.recipe,"$")]}):null},at=function(e){return e.show?Object(a.jsxs)("h4",{children:["D\xe9penses: ",Oe.a.isNull(e.recipe)?"0$":"".concat(e.recipe,"$")]}):null},st=function(e){return e.show?Object(a.jsx)(E.a,{title:"Produit vendus",data:e.data,columns:[{title:"Nom",field:"nameOfProduct"},{title:"Quantit\xe9",field:"quantity"},{title:"Prix",field:"price"},{title:"Total",field:"total"}],options:{search:!0,paging:!1,filtering:!0,exportButton:!0},isLoading:!1}):null},it=function(e){return e.show?Object(a.jsx)(E.a,{title:"Clients pr\xe9sents",data:e.data,columns:[{title:"Client",field:"nameOfClient"},{title:"Total sans r\xe9duction",field:"totalWithoutReduction"},{title:"Reduction",field:"reduction"},{title:"Total",field:"total"},{title:"Facture",field:"facture"}],options:{search:!0,paging:!1,filtering:!0,exportButton:!0},isLoading:!1}):null},rt=function(e){return e.show?Object(a.jsx)(E.a,{title:"Transactions de d\xe9pense",data:e.data,columns:[{title:"Categorie",field:"nameOfCategory"},{title:"Montant",field:"outlet"},{title:"Libell\xe9",field:"description"}],options:{search:!0,paging:!1,filtering:!0,exportButton:!0},isLoading:!1}):null},ot=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._didMount=function(){(function(e,t){var n={method:"GET",headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/sessions/get/report/").concat(t),n).then((function(e){return e.json()}))})(S.a.get("token"),s.state.timestamp).then((function(e){if(e.find){var t=[],n=[];for(var i in e.productsSell)t.push(Object(A.a)(Object(A.a)({},e.productsSell[i]),{},{total:"".concat(e.productsSell[i].price*e.productsSell[i].quantity,"$"),price:"".concat(e.productsSell[i].price,"$")}));for(var r in e.sessions)n.push(Object(A.a)(Object(A.a)({},e.sessions[r]),{},{total:"".concat(e.sessions[r].total-e.sessions[r].reduction,"$"),reduction:"".concat(e.sessions[r].reduction,"$"),facture:Oe.a.isNull(e.sessions[r].invoiceUrl)?"Aucune facture disponible":Object(a.jsxs)("a",{href:e.sessions[r].invoiceUrl,target:"_blank",children:["Voir ",Object(a.jsx)("i",{className:"fas fa-external-link-alt"})]}),totalWithoutReduction:"".concat(e.sessions[r].total,"$")}));s.setState({error:!1,isLoading:!1,info:Object(A.a)(Object(A.a)({},e),{},{productsSell:t,sessions:n})})}else s.setState({error:!0})})).catch((function(){s.setState({error:!0})}))},s._handleDate=function(e){var t=ge()(e);s.setState({date:e,timestamp:t.unix()},s._didMount)},s._displaySpinner=function(){return s.state.isLoading?Object(a.jsx)("div",{style:{textAlign:"center"},children:Object(a.jsx)(C.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})})}):null},document.title="Le Consulat - Rapport",s.state={info:[],date:null,timestamp:null,isLoading:!0,error:!1},s}return Object(l.a)(n,[{key:"render",value:function(){return this.state.error?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Rapport d'un jour"}),"S\xe9lectionnez un jour: ",Object(a.jsx)(Se.a,{selected:this.state.date,dateFormat:"dd/MM/yyyy",onChange:this._handleDate,withPortal:!0}),Object(a.jsx)("hr",{style:{backgroundColor:"black",height:1.5,width:"85%"}}),"Une erreur eu lieu, r\xe9essayez ou contactez-nous"]})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Rapport d'un jour"}),"S\xe9lectionnez un jour: ",Object(a.jsx)(Se.a,{selected:this.state.date,dateFormat:"dd/MM/yyyy",onChange:this._handleDate,withPortal:!0}),Object(a.jsx)("hr",{style:{backgroundColor:"black",height:1.5,width:"85%"}}),this._displaySpinner(),Object(a.jsx)(tt,{show:!this.state.isLoading,recipe:this.state.info.recipe}),Object(a.jsx)(nt,{show:!this.state.isLoading,recipe:this.state.info.allRecipe}),Object(a.jsx)(at,{show:!this.state.isLoading,recipe:this.state.info.expenses}),Object(a.jsxs)(et.a,{children:[Object(a.jsxs)(Ye.a,{children:[Object(a.jsx)(Ye.a.Header,{children:Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(a.jsx)("h4",{style:{display:"inline"},children:"Produits vendus"}),Object(a.jsxs)(et.a.Toggle,{as:h.a,variant:"primary",eventKey:"0",children:["Ouvrir\xa0\xa0",Object(a.jsx)("i",{class:"fas fa-chevron-down"})]})]})}),Object(a.jsx)(et.a.Collapse,{eventKey:"0",children:Object(a.jsx)(st,{show:!this.state.isLoading,data:this.state.info.productsSell})})]}),Object(a.jsxs)(Ye.a,{children:[Object(a.jsx)(Ye.a.Header,{children:Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(a.jsx)("h4",{style:{display:"inline"},children:"Sessions"}),Object(a.jsxs)(et.a.Toggle,{as:h.a,variant:"primary",eventKey:"1",children:["Ouvrir\xa0\xa0",Object(a.jsx)("i",{class:"fas fa-chevron-down"})]})]})}),Object(a.jsx)(et.a.Collapse,{eventKey:"1",children:Object(a.jsx)(it,{show:!this.state.isLoading,data:this.state.info.sessions})})]}),Object(a.jsxs)(Ye.a,{children:[Object(a.jsx)(Ye.a.Header,{children:Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(a.jsx)("h4",{style:{display:"inline"},children:"Transactions de d\xe9pense"}),Object(a.jsxs)(et.a.Toggle,{as:h.a,variant:"primary",eventKey:"2",children:["Ouvrir\xa0\xa0",Object(a.jsx)("i",{class:"fas fa-chevron-down"})]})]})}),Object(a.jsx)(et.a.Collapse,{eventKey:"2",children:Object(a.jsx)(rt,{show:!this.state.isLoading,data:this.state.info.expensesTransactions})})]})]})]})]})}}]),n}(i.a.Component),ct=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._didMount=function(){(function(e,t,n){var a={method:"GET",headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/sessions/get/report/").concat(t,"/").concat(n),a).then((function(e){return e.json()}))})(S.a.get("token"),s.beginInTimestamp,s.endInTimestamp).then((function(e){if(e.find){var t=[],n=[];for(var i in e.productsSell)t.push(Object(A.a)(Object(A.a)({},e.productsSell[i]),{},{total:"".concat(e.productsSell[i].price*e.productsSell[i].quantity,"$"),price:"".concat(e.productsSell[i].price,"$")}));for(var r in e.sessions)n.push(Object(A.a)(Object(A.a)({},e.sessions[r]),{},{total:"".concat(e.sessions[r].total-e.sessions[r].reduction,"$"),reduction:"".concat(e.sessions[r].reduction,"$"),facture:Oe.a.isNull(e.sessions[r].invoiceUrl)?"Aucune facture disponible":Object(a.jsxs)("a",{href:e.sessions[r].invoiceUrl,target:"_blank",children:["Voir ",Object(a.jsx)("i",{className:"fas fa-external-link-alt"})]}),totalWithoutReduction:"".concat(e.sessions[r].total,"$")}));s.setState({error:!1,isLoading:!1,info:Object(A.a)(Object(A.a)({},e),{},{productsSell:t,sessions:n})})}else s.setState({error:!0})})).catch((function(){s.setState({error:!0})}))},s._handleBegin=function(e){s.setState({isLoading:!0,begin:e},(function(){var t=ge()(e);s.beginInTimestamp=t.unix(),Oe.a.isNull(s.state.end)||s._didMount()}))},s._handleEnd=function(e){s.setState({isLoading:!0,end:e},(function(){var t=ge()(e);s.endInTimestamp=t.unix(),Oe.a.isNull(s.state.begin)||s._didMount()}))},s._displaySpinner=function(){return s.state.isLoading?Object(a.jsx)("div",{style:{textAlign:"center"},children:Object(a.jsx)(C.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})})}):null},document.title="Le Consulat - Rapport",s.state={info:[],end:null,begin:null,isLoading:!0,error:!1},s.beginInTimestamp=null,s.endInTimestamp=null,s}return Object(l.a)(n,[{key:"render",value:function(){return this.state.error?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Rapport d'une p\xe9riode"}),"S\xe9lectionnez une p\xe9riode: du ",Object(a.jsx)(Se.a,{selected:this.state.begin,dateFormat:"dd/MM/yyyy",onChange:this._handleBegin,withPortal:!0})," ","au"," ",Object(a.jsx)(Se.a,{selected:this.state.end,dateFormat:"dd/MM/yyyy",onChange:this._handleEnd,withPortal:!0}),Object(a.jsx)("br",{}),Object(a.jsx)("hr",{style:{backgroundColor:"black",height:1.5,width:"85%"}}),"Une erreur eu lieu, r\xe9essayez ou contactez-nous"]})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Rapport d'une p\xe9riode"}),"S\xe9lectionnez une p\xe9riode: du ",Object(a.jsx)(Se.a,{selected:this.state.begin,dateFormat:"dd/MM/yyyy",onChange:this._handleBegin,withPortal:!0})," ","au"," ",Object(a.jsx)(Se.a,{selected:this.state.end,dateFormat:"dd/MM/yyyy",onChange:this._handleEnd,withPortal:!0}),Object(a.jsx)("br",{}),Object(a.jsx)("hr",{style:{backgroundColor:"black",height:1.5,width:"85%"}}),this._displaySpinner(),Object(a.jsx)(tt,{show:!this.state.isLoading,recipe:this.state.info.recipe}),Object(a.jsx)(nt,{show:!this.state.isLoading,recipe:this.state.info.allRecipe}),Object(a.jsx)(at,{show:!this.state.isLoading,recipe:this.state.info.expenses}),Object(a.jsxs)(et.a,{children:[Object(a.jsxs)(Ye.a,{children:[Object(a.jsx)(Ye.a.Header,{children:Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(a.jsx)("h4",{style:{display:"inline"},children:"Produits vendus"}),Object(a.jsxs)(et.a.Toggle,{as:h.a,variant:"primary",eventKey:"0",children:["Ouvrir\xa0\xa0",Object(a.jsx)("i",{class:"fas fa-chevron-down"})]})]})}),Object(a.jsx)(et.a.Collapse,{eventKey:"0",children:Object(a.jsx)(st,{show:!this.state.isLoading,data:this.state.info.productsSell})})]}),Object(a.jsxs)(Ye.a,{children:[Object(a.jsx)(Ye.a.Header,{children:Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(a.jsx)("h4",{style:{display:"inline"},children:"Sessions"}),Object(a.jsxs)(et.a.Toggle,{as:h.a,variant:"primary",eventKey:"1",children:["Ouvrir\xa0\xa0",Object(a.jsx)("i",{class:"fas fa-chevron-down"})]})]})}),Object(a.jsx)(et.a.Collapse,{eventKey:"1",children:Object(a.jsx)(it,{show:!this.state.isLoading,data:this.state.info.sessions})})]}),Object(a.jsxs)(Ye.a,{children:[Object(a.jsx)(Ye.a.Header,{children:Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(a.jsx)("h4",{style:{display:"inline"},children:"Transactions de d\xe9pense"}),Object(a.jsxs)(et.a.Toggle,{as:h.a,variant:"primary",eventKey:"2",children:["Ouvrir\xa0\xa0",Object(a.jsx)("i",{class:"fas fa-chevron-down"})]})]})}),Object(a.jsx)(et.a.Collapse,{eventKey:"2",children:Object(a.jsx)(rt,{show:!this.state.isLoading,data:this.state.info.expensesTransactions})})]})]})]})]})}}]),n}(i.a.Component);function lt(e){var t={method:"GET",headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/money-transactions/category"),t).then((function(e){return e.json()}))}var dt=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e))._handle=function(e){a.props.onChange(e.value)},a.state={categories:[],categoriesToShow:[],isLoading:!0},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(oe.a)(re.a.mark((function e(){var t,n=this;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,lt(S.a.get("token")).then((function(e){if(e.find){for(var a in e.result)t.push({value:e.result[a].idCategory,label:e.result[a].name,type:e.result[a].type});n.setState({isLoading:!1,categories:t},(function(){var e=Oe.a.filter(n.state.categories,(function(e){return e.type===n.props.type}));n.setState({categoriesToShow:e})}))}else alert("Une erreur eu lieu, r\xe9essayez ou contactez-nous")})).catch((function(){alert("Une erreur eu lieu, r\xe9essayez ou contactez-nous")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.type!==e.type){var n=Oe.a.filter(this.state.categories,(function(e){return e.type===t.props.type}));this.setState({categoriesToShow:n})}}},{key:"render",value:function(){return this.state.isLoading?Object(a.jsx)(C.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})}):this.state.categories.length<1?(alert("Vous n'avez aucune cat\xe9gorie commencez par en ajouter un"),void window.location.reload()):this.props.default?Object(a.jsx)(we.a,{defaultValue:this.props.default,options:this.state.categoriesToShow,onChange:this._handle}):Object(a.jsx)(we.a,{options:this.state.categoriesToShow,onChange:this._handle})}}]),n}(i.a.Component),ut=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleClose=function(){s.props.callback?s.props.callback():s.setState({show:!1})},s._handleIdCategory=function(e){s.setState({idCategory:e})},s._handleAmount=function(e){s.setState({amount:e.target.value})},s._handleType=function(e){s.setState({type:e.target.value})},s._handleDescription=function(e){s.setState({description:e.target.value})},s._displayButton=function(){return s.state.description.length>=2&&s.state.description.length<=90&&Q.a.isString(s.state.description)&&Q.a.isNumber(Number(s.state.amount))&&Q.a.isNumber(s.state.idCategory)&&!s.state.isLoading?Object(a.jsxs)(h.a,{variant:"success",onClick:s._onClick,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]}):Object(a.jsxs)(h.a,{variant:"success",disabled:!0,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]})},s._onClick=function(e){e.preventDefault(),s.setState({isLoading:!0}),function(e,t,n){var a={method:"POST",body:JSON.stringify(e),headers:new Headers({Authorization:"Bearer "+t,"Content-type":"application/json; charset=UTF-8"})};return"enter"===n?fetch("".concat(x,"/money-transactions/enter"),a).then((function(e){return e.json()})):"outlet"===n?fetch("".concat(x,"/money-transactions/outlet"),a).then((function(e){return e.json()})):void 0}({amount:Number(s.state.amount),description:s.state.description,idCategory:s.state.idCategory},S.a.get("token"),s.state.type).then((function(e){e.create?(s.setState({isLoading:!1,success:!0,invalidForm:!1,productNotFound:!1,negativeMoney:!1,error:!1}),setTimeout((function(){window.location.reload()}),750)):e.invalidForm?s.setState({isLoading:!1,success:!1,invalidForm:!0,productNotFound:!1,negativeMoney:!1,error:!1}):e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):e.productNotFound?s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!0,negativeMoney:!1,error:!1}):e.negativeMoney?s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!1,negativeMoney:!0,error:!1}):s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!1,negativeMoney:!1,error:!0})})).catch((function(){s.setState({isLoading:!1,success:!1,invalidForm:!1,productNotFound:!1,negativeMoney:!1,error:!0})}))},s._displayAlert=function(){return s.state.success?Object(a.jsx)(p.a,{variant:"success",children:"Transaction ajout\xe9 avec succ\xe8s"}):s.state.invalidForm?Object(a.jsx)(p.a,{variant:"warning",children:"Des champs ne sont pas valides"}):s.state.negativeMoney?Object(a.jsx)(p.a,{variant:"warning",children:"Le montant sera n\xe9gatif si vous faites la transaction"}):s.state.error?Object(a.jsx)(p.a,{variant:"danger",children:"Une erreur a eu lieu, r\xe9essayer ou contactez-nous"}):void 0},s.state={show:!0,idCategory:"",type:"enter",amount:1,description:"",isLoading:!1,success:!1,invalidForm:!1,negativeMoney:!1,productNotFound:!1,error:!1},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(V.a,{show:this.state.show,onHide:this._handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(V.a.Header,{closeButton:!0,children:Object(a.jsx)(V.a.Title,{children:"Ajouter une entr\xe9e"})}),Object(a.jsxs)(V.a.Body,{style:{fontSize:15},children:[Object(a.jsxs)(b.a.Group,{controlId:"name",children:[Object(a.jsx)(b.a.Label,{children:"Cat\xe9gorie: "}),Object(a.jsx)(dt,{onChange:this._handleIdCategory,type:this.state.type})]}),Object(a.jsxs)(b.a.Group,{controlId:"amount",children:[Object(a.jsx)(b.a.Label,{children:"Montant: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleAmount,value:this.state.amount,type:"number",placeholder:"Le montant...","aria-label":"amount","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"type",children:[Object(a.jsx)(b.a.Label,{children:"Type: "}),Object(a.jsxs)("select",{className:"form-control",onChange:this._handleType,children:[Object(a.jsx)("option",{value:"enter",selected:!0,children:"Entr\xe9e"}),Object(a.jsx)("option",{value:"outlet",children:"Sortie"})]})]}),Object(a.jsxs)(b.a.Group,{controlId:"description",children:[Object(a.jsx)(b.a.Label,{children:"Libell\xe9: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleDescription,value:this.state.description,type:"text",placeholder:"Libell\xe9 de la transaction...","aria-label":"description","aria-describedby":"btnSubmit"})]}),this._displayAlert()]}),Object(a.jsxs)(V.a.Footer,{children:[this._displayButton(),Object(a.jsx)(h.a,{variant:"danger",onClick:this._handleClose,children:"Fermer"})]})]})}}]),n}(i.a.Component),ht=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._addUser=function(){s.setState({addMode:!0})},s._onClose=function(){s.setState({addMode:!1})},s._didMount=function(){(function(e,t,n){var a={method:"GET",headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/money-transactions/transactions/begin/").concat(t,"/end/").concat(n),a).then((function(e){return e.json()}))})(S.a.get("token"),s.beginInTimestamp,s.endInTimestamp).then((function(e){if(e.find){var t=[];for(var n in e.result.transaction){var a=ge.a.unix(parseInt(e.result.transaction[n].timestamp));t.push(Object(A.a)(Object(A.a)({},e.result.transaction[n]),{},{date2:a.format("DD/MM/yyyy [\xe0] HH:mm")}))}s.setState({error:!1,isLoading:!1,data:Object(A.a)(Object(A.a)({},e.result),{},{transaction:t})})}else s.setState({error:!0,isLoading:!1})})).catch((function(){s.setState({error:!0,isLoading:!1})}))},s._handleBegin=function(e){s.setState({isLoading:!0,begin:e},(function(){var t=ge()(e);s.beginInTimestamp=t.unix(),Oe.a.isNull(s.state.end)||s._didMount()}))},s._handleEnd=function(e){s.setState({isLoading:!0,end:e},(function(){var t=ge()(e);s.endInTimestamp=t.unix(),Oe.a.isNull(s.state.begin)||s._didMount()}))},s._display=function(){return s.state.isLoading?Object(a.jsx)(C.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})}):s.state.error?Object(a.jsx)("em",{children:"Une erreur a eu lieu veuillez r\xe9essayez plus tard"}):Object(a.jsxs)(a.Fragment,{children:["Montant au d\xe9but: ",s.state.data.begin.length>0?s.state.data.begin[0].amountAfter:0,"$",Object(a.jsx)("br",{}),"Montant \xe0 la fin: ",s.state.data.end.length>0?s.state.data.end[0].amountAfter:0,"$",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),"Total entr\xe9e: ",s.state.data.sumEnter.length>0?s.state.data.sumEnter[0].sumEnter:0,"$",Object(a.jsx)("br",{}),"Total sortie: ",s.state.data.sumOutlet.length>0?s.state.data.sumOutlet[0].sumOutlet:0,"$",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(E.a,{title:"Transactions mon\xe9taire",data:s.state.data.transaction,columns:s.columns,options:{search:!0,paging:!0,filtering:!0,exportButton:!0},isLoading:s.state.isLoading})]})},document.title="Le Consulat - Transactions",s.state={addMode:!1,isLoading:!0,data:null,error:!1,end:null,begin:null},s.beginInTimestamp=null,s.endInTimestamp=null,s.columns=[{title:"Cat\xe9gorie",field:"nameOfCategory"},{title:"Entr\xe9e",field:"enter"},{title:"Sortie",field:"outlet"},{title:"Argent apr\xe8s",field:"amountAfter"},{title:"Date",field:"date2"},{title:"Libell\xe9",field:"description"}],s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){X()}},{key:"render",value:function(){return console.log(this.state),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Transaction mon\xe9taire"}),Object(a.jsxs)(h.a,{variant:"success",onClick:this._addUser,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter une transaction"]})," ",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),"Les transactions  du ",Object(a.jsx)(Se.a,{selected:this.state.begin,dateFormat:"dd/MM/yyyy",onChange:this._handleBegin,withPortal:!0})," ","au"," ",Object(a.jsx)(Se.a,{selected:this.state.end,dateFormat:"dd/MM/yyyy",onChange:this._handleEnd,withPortal:!0}),Object(a.jsx)("br",{}),this._display(),this.state.addMode?Object(a.jsx)(ut,{callback:this._onClose}):null]})]})}}]),n}(i.a.Component),jt=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this))._adapt=function(e){return"enter"===e?"Entr\xe9e":"Sortie"},e._handleUpdate=function(t,n){var a;for(var s in e.state.categories)e.state.categories[s].idCategory===n.idCategory&&(a=e.state.categories[s]);e.props.onUpdate(a)},e.state={categories:[],isLoading:!0,error:!1},e.columns=[{title:"Nom",field:"name"},{title:"Type",field:"type2"}],e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;lt(S.a.get("token")).then((function(t){if(t.find){var n=[];for(var a in t.result)n.push(Object(A.a)(Object(A.a)({},t.result[a]),{},{type2:e._adapt(t.result[a].type)}));e.setState({categories:n,isLoading:!1,error:!1})}else t.invalidToken?(S.a.remove("idUser"),S.a.remove("token"),window.location.href="/application/"):e.setState({isLoading:!1,error:!1})})).catch((function(){e.setState({isLoading:!1,error:!1})}))}},{key:"render",value:function(){return this.state.error?Object(a.jsx)("h2",{children:"Une erreur a eu leiu veuillez r\xe9essayer"}):Object(a.jsx)(E.a,{title:"Liste des categories",data:this.state.categories,columns:this.columns,options:{search:!0,paging:!1,filtering:!0,exportButton:!0},isLoading:this.state.isLoading,actions:[{icon:function(){return Object(a.jsx)(R.a,{htmlColor:"#007bff"})},tooltip:"Modifier",onClick:this._handleUpdate}]})}}]),n}(i.a.Component),bt=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleClose=function(){s.props.callback?s.props.callback():s.setState({show:!1})},s._handleName=function(e){s.setState({name:e.target.value})},s._handleType=function(e){s.setState({type:e.target.value})},s._displayButton=function(){return s.state.type.length>=2&&s.state.type.length<=70&&Q.a.isString(s.state.type)&&("enter"===s.state.type||"outlet"===s.state.type)&&Q.a.isString(s.state.name)&&s.state.name.length>=2&&s.state.name.length<=70?Object(a.jsxs)(h.a,{variant:"success",onClick:s._onClick,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]}):Object(a.jsxs)(h.a,{variant:"success",disabled:!0,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter"]})},s._onClick=function(e){e.preventDefault(),s.setState({isLoading:!0}),function(e,t){var n={method:"POST",body:JSON.stringify(e),headers:new Headers({Authorization:"Bearer "+t,"Content-type":"application/json; charset=UTF-8"})};return fetch("".concat(x,"/money-transactions/category"),n).then((function(e){return e.json()}))}({name:s.state.name,type:s.state.type},S.a.get("token")).then((function(e){e.create?(s.setState({isLoading:!1,success:!0,invalidForm:!1,existName:!1,error:!1}),setTimeout((function(){window.location.reload()}),750)):e.invalidForm?s.setState({isLoading:!1,success:!1,invalidForm:!0,existName:!1,error:!1}):e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):s.setState({isLoading:!1,success:!1,invalidForm:!1,existName:!1,error:!0})})).catch((function(){s.setState({isLoading:!1,success:!1,invalidForm:!1,existName:!1,error:!0})}))},s._displayAlert=function(){return s.state.success?Object(a.jsx)(p.a,{variant:"success",children:"Cat\xe9gorie ajout\xe9 avec succ\xe8s"}):s.state.invalidForm?Object(a.jsx)(p.a,{variant:"warning",children:"Des champs ne sont pas valides"}):s.state.error?Object(a.jsx)(p.a,{variant:"danger",children:"Une erreur a eu lieu, r\xe9essayer ou contactez-nous"}):void 0},s.state={show:!0,name:"",type:"enter",isLoading:!1,success:!1,invalidForm:!1,error:!1},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(V.a,{show:this.state.show,onHide:this._handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(V.a.Header,{closeButton:!0,children:Object(a.jsx)(V.a.Title,{children:"Ajouter une cat\xe9gorie"})}),Object(a.jsxs)(V.a.Body,{style:{fontSize:15},children:[Object(a.jsxs)(b.a.Group,{controlId:"name",children:[Object(a.jsx)(b.a.Label,{children:"Nom: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleName,value:this.state.name,type:"text",placeholder:"Le nom de la cat\xe9gorie...","aria-label":"Nom","aria-describedby":"btnSubmit"})]}),Object(a.jsxs)(b.a.Group,{controlId:"type",children:[Object(a.jsx)(b.a.Label,{children:"Type: "}),Object(a.jsxs)("select",{onChange:this._handleType,className:"form-control",children:[Object(a.jsx)("option",{value:"enter",selected:!0,children:"Entr\xe9e"}),Object(a.jsx)("option",{value:"outlet",children:"Sortie"})]})]}),this._displayAlert()]}),Object(a.jsxs)(V.a.Footer,{children:[this._displayButton(),Object(a.jsx)(h.a,{variant:"danger",onClick:this._handleClose,children:"Fermer"})]})]})}}]),n}(i.a.Component),pt=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._handleClose=function(){s.props.callback?s.props.callback():s.setState({show:!1})},s._handleName=function(e){s.setState({name:e.target.value})},s._displayButton=function(){return Q.a.isString(s.state.name)&&s.state.name.length>=2&&s.state.name.length<=70?Object(a.jsx)(h.a,{variant:"success",onClick:s._onClick,children:"Confirmer"}):Object(a.jsx)(h.a,{variant:"success",disabled:!0,children:"Confirmer"})},s._onClick=function(e){e.preventDefault(),s.setState({isLoading:!0});var t={name:s.state.name};console.log(t),function(e,t,n){var a={method:"PUT",body:JSON.stringify(e),headers:new Headers({Authorization:"Bearer "+n,"Content-Type":"application/json; charset=UTF-8"})};return fetch("".concat(x,"/money-transactions/category/").concat(t),a).then((function(e){return e.json()}))}(t,s.props.data.idCategory,S.a.get("token")).then((function(e){e.update?(s.setState({isLoading:!1,success:!0,invalidForm:!1,existName:!1,error:!1}),setTimeout((function(){window.location.reload()}),750)):e.invalidForm?s.setState({isLoading:!1,success:!1,invalidForm:!0,existName:!1,error:!1}):e.invalidToken?(S.a.remove("token"),S.a.remove("idUser"),window.location.href="/application/"):s.setState({isLoading:!1,success:!1,invalidForm:!1,existName:!1,error:!0})})).catch((function(){s.setState({isLoading:!1,success:!1,invalidForm:!1,existName:!1,error:!0})}))},s._displayAlert=function(){return s.state.success?Object(a.jsx)(p.a,{variant:"success",children:"Cat\xe9gorie mdoifi\xe9e avec succ\xe8s"}):s.state.invalidForm?Object(a.jsx)(p.a,{variant:"warning",children:"Des champs ne sont pas valides"}):s.state.error?Object(a.jsx)(p.a,{variant:"danger",children:"Une erreur a eu lieu, r\xe9essayer ou contactez-nous"}):void 0},s.state={show:!0,name:s.props.data.name,isLoading:!1,success:!1,invalidForm:!1,error:!1},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(V.a,{show:this.state.show,onHide:this._handleClose,backdrop:"static",keyboard:!1,children:[Object(a.jsx)(V.a.Header,{closeButton:!0,children:Object(a.jsx)(V.a.Title,{children:"Modifier une cat\xe9gorie"})}),Object(a.jsxs)(V.a.Body,{style:{fontSize:15},children:[Object(a.jsxs)(b.a.Group,{controlId:"name",children:[Object(a.jsx)(b.a.Label,{children:"Nom: "}),Object(a.jsx)(b.a.Control,{onChange:this._handleName,value:this.state.name,type:"text",placeholder:"Le nom de la cat\xe9gorie...","aria-label":"Nom","aria-describedby":"btnSubmit"})]}),this._displayAlert()]}),Object(a.jsxs)(V.a.Footer,{children:[this._displayButton(),Object(a.jsx)(h.a,{variant:"danger",onClick:this._handleClose,children:"Fermer"})]})]})}}]),n}(i.a.Component),ft=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={isLoading:!0,data:[],error:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=["#838B8B","#668B8B","#2F4F4F"];(function(e){var t={method:"GET",headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/money-transactions/category/most-popular/enter"),t).then((function(e){return e.json()}))})(S.a.get("token")).then((function(n){if(n.find){var a=[];for(var s in n.result)a.push({title:n.result[s].nameOfCategory,value:n.result[s].value_occurrence,color:t[s]});e.setState({error:!1,isLoading:!1,data:a})}else e.setState({error:!0,isLoading:!1})})).catch((function(){e.setState({error:!0,isLoading:!1})}))}},{key:"render",value:function(){return this.state.isLoading?Object(a.jsx)(C.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})}):this.state.error?Object(a.jsx)("em",{children:"Une erreur a eu lieu r\xe9esayez ou contactez-nous"}):Object(a.jsx)(je.PieChart,{data:this.state.data,labelStyle:{fill:"#fff",opacity:.75,pointerEvents:"none",fontSize:"25%"},labelPosition:50,label:function(e){var t=e.dataEntry;return t.title+" "+Math.round(t.percentage)+"%"}})}}]),n}(i.a.Component),mt=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={isLoading:!0,data:[],error:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=["#838B8B","#668B8B","#2F4F4F"];(function(e){var t={method:"GET",headers:new Headers({Authorization:"Bearer "+e,"Content-Type":"application/x-www-form-urlencoded"})};return fetch("".concat(x,"/money-transactions/category/most-popular/outlet"),t).then((function(e){return e.json()}))})(S.a.get("token")).then((function(n){if(n.find){var a=[];for(var s in n.result)a.push({title:n.result[s].nameOfCategory,value:n.result[s].value_occurrence,color:t[s]});e.setState({error:!1,isLoading:!1,data:a})}else e.setState({error:!0,isLoading:!1})})).catch((function(){e.setState({error:!0,isLoading:!1})}))}},{key:"render",value:function(){return this.state.isLoading?Object(a.jsx)(C.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})}):this.state.error?Object(a.jsx)("em",{children:"Une erreur a eu lieu r\xe9esayez ou contactez-nous"}):Object(a.jsx)(je.PieChart,{data:this.state.data,labelStyle:{fill:"#fff",opacity:.75,pointerEvents:"none",fontSize:"25%"},labelPosition:50,label:function(e){var t=e.dataEntry;return t.title+" "+Math.round(t.percentage)+"%"}})}}]),n}(i.a.Component),Ot=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e))._addUser=function(){a.setState({addMode:!0,editMode:!1})},a._onUpdate=function(e){a.infoEdit=e,a.setState({addMode:!1,editMode:!0})},a._onClose=function(){a.setState({addMode:!1,editMode:!1})},document.title="Le Consulat - Cat\xe9gories",a.state={addMode:!1,editMode:!1},a.infoEdit=null,a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){X()}},{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Cat\xe9gories"}),Object(a.jsxs)(h.a,{variant:"success",onClick:this._addUser,children:[Object(a.jsx)("i",{class:"fas fa-plus-circle"})," Ajouter une cat\xe9gorie"]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(jt,{onUpdate:this._onUpdate}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("h2",{children:"Cat\xe9gories d'entr\xe9e les plus fr\xe9quentes"}),Object(a.jsx)("div",{style:{width:"60vh"},children:Object(a.jsx)(ft,{})}),Object(a.jsx)("h2",{children:"Cat\xe9gories de sorties les plus fr\xe9quentes"}),Object(a.jsx)("div",{style:{width:"60vh",alignItems:"center"},children:Object(a.jsx)(mt,{})}),this.state.addMode?Object(a.jsx)(bt,{callback:this._onClose}):null,this.state.editMode?Object(a.jsx)(pt,{callback:this._onClose,data:this.infoEdit}):null]})]})}}]),n}(i.a.Component),vt=function(){return document.title="Le Consulat - Page Introuvable",Object(a.jsx)(j.a,{children:Object(a.jsx)("h1",{children:"Page introuvable"})})},xt=n(440),gt=n(57),yt=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._renderRow=function(){var e=[];for(var t in s.state.info)e.push(Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:s.state.info[t].name}),Object(a.jsx)("td",{children:s.state.info[t].inStock})]}));return window.setTimeout((function(){window.print()}),2e3),e},document.title="Le Consulat - Print",s.state={info:[],toDisplay:[],isLoading:!0,error:!1,type:"all"},s.nbre=0,s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;ce(S.a.get("token")).then((function(t){t.find?e.setState({info:Oe.a.orderBy(Oe.a.orderBy(t.result,["name"],["asc"]),["type"],["asc"]),isLoading:!1,error:!1}):e.setState({error:!0})})).catch((function(){e.setState({error:!0})}))}},{key:"render",value:function(){if(this.state.error)return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Print"}),Object(a.jsx)("em",{children:"Une erreur a eu lieu, r\xe9essayez plus tard ou contactez-nous"})]})]});var e=ge()();return Object(a.jsx)(j.a,{style:{justifyContent:"center",display:"flex",marginTop:5,fontSize:"300%"},children:Object(a.jsxs)("table",{border:"1",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Object(a.jsx)("th",{colSpan:"2",style:{textAlign:"center"},children:e.format("[Le] DD MMM YYYY")})})}),this._renderRow()]})})}}]),n}(i.a.Component),St=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._renderRow=function(){var e=[];for(var t in s.state.info)e.push(Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:s.state.info[t].name}),Object(a.jsx)("td",{children:s.state.info[t].inStock})]}));return window.setTimeout((function(){window.print()}),2e3),e},document.title="Le Consulat - Print",s.state={info:[],toDisplay:[],isLoading:!0,error:!1,type:"all"},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;ce(S.a.get("token")).then((function(t){t.find?e.setState({info:Oe.a.filter(Oe.a.orderBy(t.result,["name"],["asc"]),(function(e){return"Boissons"===e.type})),isLoading:!1,error:!1}):e.setState({error:!0})})).catch((function(){e.setState({error:!0})}))}},{key:"render",value:function(){if(this.state.error)return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Print"}),Object(a.jsx)("em",{children:"Une erreur a eu lieu, r\xe9essayez plus tard ou contactez-nous"})]})]});var e=ge()();return Object(a.jsx)(j.a,{style:{justifyContent:"center",display:"flex",marginTop:5,fontSize:"300%"},children:Object(a.jsxs)("table",{border:"1",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Object(a.jsx)("th",{colSpan:"2",style:{textAlign:"center"},children:e.format("[Le] DD MMM YYYY")})})}),this._renderRow()]})})}}]),n}(i.a.Component),kt=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._renderRow=function(){var e=[];for(var t in s.state.info)e.push(Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:s.state.info[t].name}),Object(a.jsx)("td",{children:s.state.info[t].inStock})]}));return window.setTimeout((function(){window.print()}),2e3),e},document.title="Le Consulat - Print",s.state={info:[],toDisplay:[],isLoading:!0,error:!1,type:"all"},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;ce(S.a.get("token")).then((function(t){t.find?e.setState({info:Oe.a.filter(Oe.a.orderBy(t.result,["name"],["asc"]),(function(e){return"Spiritueux"===e.type})),isLoading:!1,error:!1}):e.setState({error:!0})})).catch((function(){e.setState({error:!0})}))}},{key:"render",value:function(){if(this.state.error)return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Print"}),Object(a.jsx)("em",{children:"Une erreur a eu lieu, r\xe9essayez plus tard ou contactez-nous"})]})]});var e=ge()();return Object(a.jsx)(j.a,{style:{justifyContent:"center",display:"flex",marginTop:5,fontSize:"300%"},children:Object(a.jsxs)("table",{border:"1",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Object(a.jsx)("th",{colSpan:"2",style:{textAlign:"center"},children:e.format("[Le] DD MMM YYYY")})})}),this._renderRow()]})})}}]),n}(i.a.Component),Ct=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._renderRow=function(){var e=[];for(var t in s.state.info)e.push(Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:s.state.info[t].name}),Object(a.jsx)("td",{children:s.state.info[t].inStock})]}));return window.setTimeout((function(){window.print()}),2e3),e},document.title="Le Consulat - Print",s.state={info:[],toDisplay:[],isLoading:!0,error:!1,type:"all"},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;ce(S.a.get("token")).then((function(t){t.find?e.setState({info:Oe.a.filter(Oe.a.orderBy(t.result,["name"],["asc"]),(function(e){return"Cigarettes"===e.type})),isLoading:!1,error:!1}):e.setState({error:!0})})).catch((function(){e.setState({error:!0})}))}},{key:"render",value:function(){if(this.state.error)return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Print"}),Object(a.jsx)("em",{children:"Une erreur a eu lieu, r\xe9essayez plus tard ou contactez-nous"})]})]});var e=ge()();return Object(a.jsx)(j.a,{style:{justifyContent:"center",display:"flex",marginTop:5,fontSize:"300%"},children:Object(a.jsxs)("table",{border:"1",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Object(a.jsx)("th",{colSpan:"2",style:{textAlign:"center"},children:e.format("[Le] DD MMM YYYY")})})}),this._renderRow()]})})}}]),n}(i.a.Component),wt=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e))._renderRow=function(){var e=[];for(var t in s.state.info)e.push(Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:s.state.info[t].name}),Object(a.jsx)("td",{children:s.state.info[t].inStock})]}));return window.setTimeout((function(){window.print()}),2e3),e},document.title="Le Consulat - Print",s.state={info:[],toDisplay:[],isLoading:!0,error:!1,type:"all"},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;ce(S.a.get("token")).then((function(t){t.find?e.setState({info:Oe.a.filter(Oe.a.orderBy(t.result,["name"],["asc"]),(function(e){return"Pl\xe2ts"===e.type})),isLoading:!1,error:!1}):e.setState({error:!0})})).catch((function(){e.setState({error:!0})}))}},{key:"render",value:function(){if(this.state.error)return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{}),Object(a.jsxs)(j.a,{children:[Object(a.jsx)("h1",{children:"Print"}),Object(a.jsx)("em",{children:"Une erreur a eu lieu, r\xe9essayez plus tard ou contactez-nous"})]})]});var e=ge()();return Object(a.jsx)(j.a,{style:{justifyContent:"center",display:"flex",marginTop:5,fontSize:"300%"},children:Object(a.jsxs)("table",{border:"1",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Object(a.jsx)("th",{colSpan:"2",style:{textAlign:"center"},children:e.format("[Le] DD MMM YYYY")})})}),this._renderRow()]})})}}]),n}(i.a.Component);var Lt=function(){return Object(a.jsx)(xt.a,{children:Object(a.jsxs)(gt.c,{children:[Object(a.jsx)(gt.a,{exact:!0,path:"/application",component:k}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/login",component:k}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/home",component:w}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/users",component:Z}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/clients",component:se}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/products",component:fe}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/stocks",component:ve}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/transactions/detail",component:Fe}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/transactions/wholesale",component:Te}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/transactions/manager",component:Ue}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/sessions/get/:idSession",component:Je}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/sessions/inProgress",component:We}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/sessions/notPaid",component:Ze}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/sessions/report",component:ot}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/sessions/report/period",component:ct}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/guichet/transactions",component:ht}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/guichet/categories",component:Ot}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/print/all",component:yt}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/print/Boissons",component:St}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/print/Spiritueux",component:kt}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/print/Cigarettes",component:Ct}),Object(a.jsx)(gt.a,{exact:!0,path:"/application/print/Pl\xe2ts",component:wt}),Object(a.jsx)(gt.a,{component:vt})]})})},_t=function(e){e&&e instanceof Function&&n.e(6).then(n.bind(null,1011)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),i(e),r(e)}))};o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(Lt,{})}),document.getElementById("root")),_t()}},[[586,1,2]]]);
//# sourceMappingURL=main.c8571052.chunk.js.map